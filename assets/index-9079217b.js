import{j as n,r as b,a as Ee}from"./node_modules/react-b3c806cb.js";import{c as Qn}from"./node_modules/react-dom-25528ff3.js";import{L as Jn,H as ei}from"./node_modules/react-router-dom-49feb913.js";import{c as E}from"./node_modules/classnames-2d9bdd72.js";import{c as ti,u as ni,a as ii,b as ai,d as G,e as si,f as ri,W as oi,g as li}from"./node_modules/wagmi-acf70074.js";import{p as pi,I as ui,q as di,r as yi,t as ci}from"./node_modules/@wagmi-b2e05a3a.js";import{U as mi}from"./node_modules/@uniswap-19584686.js";import{L as Ti}from"./node_modules/@lyrafinance-6410b6f9.js";import"./node_modules/cross-fetch-0cb7f003.js";import{G as fi,W as bi,C as z,B as Y,H as Qt,I as Jt}from"./node_modules/@ethersproject-29029959.js";import{i as ee,u as je}from"./node_modules/swr-55b31238.js";import{Q as gt,k as hi,h as gi}from"./node_modules/react-toastify-2bbaac58.js";import{S as xi,c as Ci}from"./node_modules/react-select-c36f4286.js";import{W as _i}from"./node_modules/react-tooltip-12f64ada.js";import{b as Ye,O as ki,a as Si,d as vi,e as ke,f as wi}from"./node_modules/react-router-361d4896.js";import{E as Pi}from"./node_modules/react-error-boundary-97ee8d4a.js";import{u as Ai,a as Bi,b as ze,c as xt}from"./node_modules/react-use-4c2d27be.js";import{R as Ct}from"./node_modules/react-modal-01aa4059.js";import{I as Di}from"./node_modules/react-icons-f4e20589.js";import{u as _t}from"./node_modules/ethers-2358cd5f.js";import{f as en}from"./node_modules/date-fns-8fa817a4.js";import{A as Ei,a as Mi}from"./node_modules/@szhsin-4ef2fab2.js";import{r as Ii}from"./node_modules/swiper-4105a6d8.js";import{S as ji}from"./node_modules/rc-slider-6e770a8f.js";import{R as Oi,A as Fi,X as Ni,Y as Li,T as Ri,a as Ui,b as $t,C as Hi}from"./node_modules/recharts-434a0d15.js";import"./node_modules/scheduler-765c72db.js";import"./node_modules/@remix-run-06a34d2a.js";import"./node_modules/@tanstack-183183e8.js";import"./node_modules/use-sync-external-store-da492776.js";import"./node_modules/@noble-c8e7831c.js";import"./node_modules/eventemitter3-bb78ea90.js";import"./node_modules/zustand-51a414f0.js";import"./node_modules/graphql-tag-9568edd7.js";import"./node_modules/graphql-6a9502bd.js";import"./node_modules/@apollo-b7627a8e.js";import"./node_modules/optimism-96b4f7fa.js";import"./node_modules/@wry-af370e25.js";import"./node_modules/ts-invariant-d603e89e.js";import"./node_modules/zen-observable-ts-47d5f8bb.js";import"./node_modules/symbol-observable-f2ed883d.js";import"./node_modules/bech32-05567f09.js";import"./node_modules/js-sha3-24c53a34.js";import"./node_modules/bn.js-9a1e13f9.js";import"./node_modules/hash.js-4c1937cf.js";import"./node_modules/minimalistic-assert-7cc78341.js";import"./node_modules/inherits-2c87d58f.js";import"./node_modules/aes-js-da3ffc93.js";import"./node_modules/scrypt-js-1f37ac71.js";import"./node_modules/clsx-1229b3e0.js";import"./node_modules/@babel-9a9b6246.js";import"./node_modules/@emotion-21fe090a.js";import"./node_modules/hoist-non-react-statics-23d96a9a.js";import"./node_modules/react-is-e8e5dbb3.js";import"./node_modules/stylis-79144faa.js";import"./node_modules/@floating-ui-1f2e0c5a.js";import"./node_modules/use-isomorphic-layout-effect-815acb30.js";import"./node_modules/memoize-one-297ddbcb.js";import"./node_modules/@xobotyi-c2000ea3.js";import"./node_modules/prop-types-37029266.js";import"./node_modules/warning-883c7a3c.js";import"./node_modules/exenv-9baed461.js";import"./node_modules/react-lifecycles-compat-b033b73b.js";import"./node_modules/react-transition-state-c9729633.js";import"./node_modules/rc-util-0a69e361.js";import"./node_modules/react-resize-detector-bae69e67.js";import"./node_modules/lodash-77560e0f.js";import"./node_modules/react-smooth-e306ac43.js";import"./node_modules/fast-equals-a0711cdd.js";import"./node_modules/victory-vendor-5e3e398c.js";import"./node_modules/d3-scale-4cce9527.js";import"./node_modules/internmap-7949acc8.js";import"./node_modules/d3-array-7d9b19f9.js";import"./node_modules/d3-time-format-aa787c71.js";import"./node_modules/d3-time-9ce187c0.js";import"./node_modules/d3-interpolate-8fa1f6ff.js";import"./node_modules/d3-color-6502c434.js";import"./node_modules/d3-format-ffdb8652.js";import"./node_modules/recharts-scale-170b47f7.js";import"./node_modules/decimal.js-light-6fe16ef2.js";import"./node_modules/d3-shape-9e788a4f.js";import"./node_modules/d3-path-41c4cb36.js";import"./node_modules/reduce-css-calc-99c9136f.js";import"./node_modules/css-unit-converter-9e08bb2c.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();const $i="/assets/Logo-258738bb.svg",tn=({className:e})=>n.jsx("div",{className:E("Logo",e),children:n.jsx("a",{className:"Logo__link",href:"/index.html",children:n.jsx("img",{src:$i,alt:"Sharwa.Finance"})})});const kt=({className:e,links:t,type:i})=>{const a=E(e,i&&`Links_${i}`);return n.jsx("div",{className:E("Links",a),children:t.map((s,r)=>{var d;const o=E("Links__item",s.isActive&&"active");return((d=s.to)==null?void 0:d.startsWith("http"))?n.jsx("a",{className:o,href:s.to,rel:"noreferrer",target:"_blank",children:s.name},s.to):n.jsx(Jn,{to:s.to,className:o,disabled:s.isDisabled,onClick:s.isDisabled&&(u=>u.preventDefault()),children:s.name},s.to??r)})})};const nn=e=>{const[t,i]=b.useState(!1),a=b.useCallback(()=>{document.removeEventListener("click",a),i(!1),e&&e()},[]);return{isOpen:t,openPopup:()=>{t||(i(!0),setTimeout(()=>{document.addEventListener("click",a)},10))},closePopup:a}},Wi="/assets/wallet-fce3adf9.svg",qi="/assets/link-c9833cec.svg",Gi="/assets/cross_white-42eb5050.svg",Vi="/assets/Arbitrum-299bccbf.svg",Ki="/assets/Arbitrum-299bccbf.svg",me=42161,Ze=10,St=[me],vt={[me]:{name:"Arbitrum",icon:Vi},[Ze]:{name:"Optimism",icon:Ki,isDisabled:!0}},Yi=[{inputs:[{internalType:"address",name:"_exchanger",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"productType",type:"uint256"}],name:"CreateBuild",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"allApprove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],internalType:"struct ITxBuilder.Module[]",name:"moduleArray",type:"tuple[]"},{internalType:"bytes[]",name:"parametersArray",type:"bytes[]"},{internalType:"bytes[]",name:"swapDataArray",type:"bytes[]"},{internalType:"uint256",name:"productType",type:"uint256"}],name:"consolidationOfTransactions",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"exchanger",outputs:[{internalType:"contract Exchanger",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"module",outputs:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextBuildID",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"exchangerAddress",type:"address"}],name:"setExchanger",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"},{components:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"string",name:"name",type:"string"}],internalType:"struct ITxBuilder.Module",name:"modData",type:"tuple"}],name:"setModule",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"}],zi=[{inputs:[{internalType:"address",name:"_optionMarket",type:"address"},{internalType:"address",name:"_optionToken",type:"address"},{internalType:"address",name:"_referrer",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"strikeId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"positionId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"iterations",type:"uint256"},{indexed:!1,internalType:"enum IOptionMarket.OptionType",name:"optionType",type:"uint8"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"setCollateralTo",type:"uint256"},{indexed:!1,internalType:"uint256",name:"minTotalCost",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxTotalCost",type:"uint256"},{indexed:!1,internalType:"address",name:"referrer",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenID",type:"uint256"}],name:"OpenPositionByLyra",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"allApprove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"parameters",type:"bytes"}],name:"calculateAmount",outputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromLyra",outputs:[{components:[{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"iterations",type:"uint256"},{internalType:"enum IOptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"},{internalType:"uint256",name:"minTotalCost",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"address",name:"referrer",type:"address"}],internalType:"struct IOptionMarket.TradeInputParameters",name:"params",type:"tuple"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"iterations",type:"uint256"},{internalType:"enum IOptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"},{internalType:"uint256",name:"minTotalCost",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"address",name:"referrer",type:"address"}],internalType:"struct IOptionMarket.TradeInputParameters",name:"params",type:"tuple"}],name:"encodeFromLyra",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"optionMarket",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"optionToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"parametersArray",type:"bytes"},{internalType:"uint256",name:"buildID",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"processTx",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"referrer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newReferrer",type:"address"}],name:"setReferrer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Zi=[{inputs:[{internalType:"address",name:"_optionMarket",type:"address"},{internalType:"address",name:"_optionToken",type:"address"},{internalType:"address",name:"_referrer",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"strikeId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"positionId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"iterations",type:"uint256"},{indexed:!1,internalType:"enum IOptionMarket.OptionType",name:"optionType",type:"uint8"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"setCollateralTo",type:"uint256"},{indexed:!1,internalType:"uint256",name:"minTotalCost",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxTotalCost",type:"uint256"},{indexed:!1,internalType:"address",name:"referrer",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenID",type:"uint256"}],name:"OpenPositionByLyra",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"allApprove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"parameters",type:"bytes"}],name:"calculateAmount",outputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromLyra",outputs:[{components:[{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"iterations",type:"uint256"},{internalType:"enum IOptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"},{internalType:"uint256",name:"minTotalCost",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"address",name:"referrer",type:"address"}],internalType:"struct IOptionMarket.TradeInputParameters",name:"params",type:"tuple"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"iterations",type:"uint256"},{internalType:"enum IOptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"},{internalType:"uint256",name:"minTotalCost",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"address",name:"referrer",type:"address"}],internalType:"struct IOptionMarket.TradeInputParameters",name:"params",type:"tuple"}],name:"encodeFromLyra",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"optionMarket",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"optionToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"parametersArray",type:"bytes"},{internalType:"uint256",name:"buildID",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"processTx",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"referrer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newReferrer",type:"address"}],name:"setReferrer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Xi=[{inputs:[{internalType:"address",name:"_proxySeller",type:"address"},{internalType:"address",name:"_hegicErc721",type:"address"},{internalType:"address",name:"_usdc",type:"address"},{internalType:"address",name:"_referrer",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"buildID",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenID",type:"uint256"},{indexed:!1,internalType:"address",name:"strategy",type:"address"},{indexed:!1,internalType:"address",name:"holder",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"period",type:"uint256"},{indexed:!1,internalType:"uint256",name:"premium",type:"uint256"}],name:"OpenPositionByHegic",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"allApprove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"parameters",type:"bytes"}],name:"calculateAmount",outputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromHegic",outputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"maxTotalCost",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"encodeFromHegic",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[],name:"hegicErc721",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"parametersArray",type:"bytes"},{internalType:"uint256",name:"buildID",type:"uint256"},{internalType:"address",name:"user",type:"address"}],name:"processTx",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"proxySeller",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"referrer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newReferrer",type:"address"}],name:"setReferrer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"usdc",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],Qi=[{inputs:[{internalType:"address",name:"_erc721Address",type:"address"},{internalType:"address",name:"_operationalTreasury",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"TakeProfitDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"TakeProfitExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{indexed:!1,internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"}],name:"TakeProfitSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newTakeProfitPrice",type:"uint256"},{indexed:!1,internalType:"enum TakeProfit.TakeType",name:"newTakeType",type:"uint8"}],name:"TakeProfitUpdated",type:"event"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkTakeProfit",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"commissionSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"deleteTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"erc721Contract",outputs:[{internalType:"contract IERC721",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"executeTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getActiveTakeCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getCurrentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getExpirationTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getPayOffAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"idTokenToIndexToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"indexTokenToTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxActiveTakes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"operationalTreasury",outputs:[{internalType:"contract IOperationalTreasury",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newCommissionSize",type:"uint256"}],name:"setCommissionSize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaxActiveTakes",type:"uint256"}],name:"setMaxActiveTakes",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"}],name:"setTakeProfit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenIdToTokenInfo",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"takeProfitPrice",type:"uint256"},{internalType:"uint256",name:"expirationTime",type:"uint256"},{internalType:"address",name:"owner",type:"address"},{internalType:"enum TakeProfit.TakeType",name:"takeType",type:"uint8"},{internalType:"uint256",name:"commissionPaid",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"newTakeProfitPrice",type:"uint256"},{internalType:"enum TakeProfit.TakeType",name:"newTakeType",type:"uint8"}],name:"updateTakeProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawableBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Ji=[{inputs:[{internalType:"address",name:"_priceProvider",type:"address"},{internalType:"address",name:"_optionMarket",type:"address"},{internalType:"address",name:"_optionToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"StopOrderDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"StopOrderExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"StopOrderIssue",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"stopOrderPrice",type:"uint256"},{indexed:!1,internalType:"enum StopOrder.OrderType",name:"stopOrderType",type:"uint8"}],name:"StopOrderSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newStopOrderPrice",type:"uint256"},{indexed:!1,internalType:"enum StopOrder.OrderType",name:"newStopOrderType",type:"uint8"}],name:"StopOrderUpdated",type:"event"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkExpire",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkStopOrder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"commissionSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"deleteStopOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"executeStopOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getActiveStopCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"}],name:"getFirstFourBytes",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"idTokenToIndexToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"indexTokenToTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxActiveStopOrders",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"optionMarket",outputs:[{internalType:"contract IOptionMarket",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"optionToken",outputs:[{internalType:"contract IOptionToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceProvider",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"newCommissionSize",type:"uint256"}],name:"setCommissionSize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaxActiveStopOrders",type:"uint256"}],name:"setMaxActiveStopOrders",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newRewardAddress",type:"address"}],name:"setRewardAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"stopOrderPrice",type:"uint256"},{internalType:"enum StopOrder.OrderType",name:"stopOrderType",type:"uint8"}],name:"setStopOrder",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenIdToTokenInfo",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"stopOrderPrice",type:"uint256"},{internalType:"uint256",name:"expirationTime",type:"uint256"},{internalType:"address",name:"owner",type:"address"},{internalType:"enum StopOrder.OrderType",name:"stopOrderType",type:"uint8"},{internalType:"uint256",name:"commissionPaid",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"newStopOrderPrice",type:"uint256"},{internalType:"enum StopOrder.OrderType",name:"newStopOrderType",type:"uint8"}],name:"updateStopOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawableBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],ea=[{inputs:[{internalType:"address",name:"_priceProvider",type:"address"},{internalType:"address",name:"_optionMarket",type:"address"},{internalType:"address",name:"_optionToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"StopOrderDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"StopOrderExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"StopOrderIssue",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"stopOrderPrice",type:"uint256"},{indexed:!1,internalType:"enum StopOrder.OrderType",name:"stopOrderType",type:"uint8"}],name:"StopOrderSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newStopOrderPrice",type:"uint256"},{indexed:!1,internalType:"enum StopOrder.OrderType",name:"newStopOrderType",type:"uint8"}],name:"StopOrderUpdated",type:"event"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkExpire",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"checkStopOrder",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"commissionSize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"deleteStopOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"executeStopOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getActiveStopCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"}],name:"getFirstFourBytes",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"idTokenToIndexToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"indexTokenToTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxActiveStopOrders",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"optionMarket",outputs:[{internalType:"contract IOptionMarket",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"optionToken",outputs:[{internalType:"contract IOptionToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceProvider",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"newCommissionSize",type:"uint256"}],name:"setCommissionSize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaxActiveStopOrders",type:"uint256"}],name:"setMaxActiveStopOrders",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newRewardAddress",type:"address"}],name:"setRewardAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"stopOrderPrice",type:"uint256"},{internalType:"enum StopOrder.OrderType",name:"stopOrderType",type:"uint8"}],name:"setStopOrder",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenIdToTokenInfo",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"stopOrderPrice",type:"uint256"},{internalType:"uint256",name:"expirationTime",type:"uint256"},{internalType:"address",name:"owner",type:"address"},{internalType:"enum StopOrder.OrderType",name:"stopOrderType",type:"uint8"},{internalType:"uint256",name:"commissionPaid",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"newStopOrderPrice",type:"uint256"},{internalType:"enum StopOrder.OrderType",name:"newStopOrderType",type:"uint8"}],name:"updateStopOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawProfit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawableBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],ta=[{inputs:[{internalType:"address",name:"_swapRouter",type:"address"},{internalType:"address",name:"_roleManager",type:"address"},{internalType:"address",name:"_weth9",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"bytes",name:"swapData",type:"bytes"}],name:"calculateMsgValue",outputs:[{internalType:"uint256",name:"value",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes[]",name:"swapDataArray",type:"bytes[]"},{internalType:"uint256",name:"msgValue",type:"uint256"}],name:"checkMsgValue",outputs:[],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],name:"decodeFromExchange",outputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"},{internalType:"bool",name:"isETH",type:"bool"},{internalType:"bool",name:"swap",type:"bool"}],internalType:"struct IExchanger.ExchangeData",name:"data",type:"tuple"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes",name:"path",type:"bytes"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"address",name:"tokenOut",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMinimum",type:"uint256"},{internalType:"bool",name:"isETH",type:"bool"},{internalType:"bool",name:"swap",type:"bool"}],internalType:"struct IExchanger.ExchangeData",name:"data",type:"tuple"}],name:"encodeFromExchange",outputs:[{internalType:"bytes",name:"paramData",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"roleManager",outputs:[{internalType:"contract RoleManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"},{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"}],name:"swap",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"swapRouter",outputs:[{internalType:"contract ISwapRouter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"weth9",outputs:[{internalType:"contract IWETH9",name:"",type:"address"}],stateMutability:"view",type:"function"}],na=[{inputs:[{internalType:"contract IERC20",name:"_token",type:"address"},{internalType:"contract IPositionsManager",name:"_manager",type:"address"},{internalType:"uint256",name:"_maxLockupPeriod",type:"uint256"},{internalType:"contract ICoverPool",name:"_coverPool",type:"address"},{internalType:"uint256",name:"_benchmark",type:"uint256"},{internalType:"contract IHegicStrategy[]",name:"initialStrategies",type:"address[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"Expired",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Paid",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Replenished",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"acceptedStrategy",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"s",type:"address"}],name:"addStrategy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"benchmark",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"buy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"s",type:"address"}],name:"connectStrategy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"coverPool",outputs:[{internalType:"contract ICoverPool",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"lockedByStrategy",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"lockedLiquidity",outputs:[{internalType:"enum IOperationalTreasury.LockedLiquidityState",name:"state",type:"uint8"},{internalType:"contract IHegicStrategy",name:"strategy",type:"address"},{internalType:"uint128",name:"negativepnl",type:"uint128"},{internalType:"uint128",name:"positivepnl",type:"uint128"},{internalType:"uint32",name:"expiration",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockedPremium",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"manager",outputs:[{internalType:"contract IPositionsManager",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxLockupPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IHegicStrategy",name:"",type:"address"}],name:"mayBeAcceptedAtEpoch",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionID",type:"uint256"},{internalType:"address",name:"account",type:"address"}],name:"payOff",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"replenish",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"setBenchmark",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"token",outputs:[{internalType:"contract IERC20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalLocked",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"lockedLiquidityID",type:"uint256"}],name:"unlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],ia=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"HEGIC_POOL_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"holder",type:"address"}],name:"createOptionFor",outputs:[{internalType:"uint256",name:"id",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"isApprovedOrOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextTokenId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC721Metadata",name:"_uriBuilder",type:"address"}],name:"setURIBuilder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokenPool",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"uri",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"uriBuilder",outputs:[{internalType:"contract IERC721Metadata",name:"",type:"address"}],stateMutability:"view",type:"function"}],aa=[{inputs:[{internalType:"contract AggregatorV3Interface",name:"_priceProvider",type:"address"},{internalType:"contract IPremiumCalculator",name:"_pricer",type:"address"},{internalType:"uint256",name:"_limit",type:"uint256"},{internalType:"uint8",name:"_spotDecimals",type:"uint8"},{internalType:"uint16",name:"_priceScale",type:"uint16"},{internalType:"uint48[2]",name:"periodLimits",type:"uint48[2]"},{internalType:"uint48",name:"_exerciseWindowDuration",type:"uint48"},{internalType:"contract LimitController",name:"_limitController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"id",type:"uint256"},{components:[{internalType:"uint128",name:"amount",type:"uint128"},{internalType:"uint128",name:"strike",type:"uint128"}],indexed:!1,internalType:"struct IHegicStrategy.StrategyData",name:"data",type:"tuple"},{indexed:!1,internalType:"uint256",name:"negativepnl",type:"uint256"},{indexed:!1,internalType:"uint256",name:"positivepnl",type:"uint256"},{indexed:!1,internalType:"uint256",name:"period",type:"uint256"},{indexed:!1,internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"Acquired",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"limit",type:"uint256"}],name:"SetLimit",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"",type:"bytes[]"}],name:"calculateNegativepnlAndPositivepnl",outputs:[{internalType:"uint128",name:"negativepnl",type:"uint128"},{internalType:"uint128",name:"positivepnl",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"connect",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"holder",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"period",type:"uint256"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"create",outputs:[{internalType:"uint32",name:"expiration",type:"uint32"},{internalType:"uint256",name:"negativePNL",type:"uint256"},{internalType:"uint256",name:"positivePNL",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"exerciseWindowDuration",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"period",type:"uint32"},{internalType:"bytes[]",name:"additional",type:"bytes[]"}],name:"getAvailableContracts",outputs:[{internalType:"uint256",name:"available",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLockedByStrategy",outputs:[{internalType:"uint256",name:"amount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionID",type:"uint256"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"",type:"address"}],name:"isPayoffAvailable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"k",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[],name:"limitController",outputs:[{internalType:"contract LimitController",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"lockedLimit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxPeriod",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[],name:"minPeriod",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"optionID",type:"uint256"}],name:"payOffAmount",outputs:[{internalType:"uint256",name:"profit",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"pool",outputs:[{internalType:"contract IOperationalTreasury",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"positionExpiration",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceProvider",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pricer",outputs:[{internalType:"contract IPremiumCalculator",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint48",name:"value",type:"uint48"}],name:"setK",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"setLimit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract LimitController",name:"value",type:"address"}],name:"setLimitController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint48[2]",name:"periodLimits",type:"uint48[2]"}],name:"setPeriodLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IPremiumCalculator",name:"value",type:"address"}],name:"setPricer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"strategyData",outputs:[{internalType:"uint128",name:"amount",type:"uint128"},{internalType:"uint128",name:"strike",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],sa=[{inputs:[{internalType:"int256[5]",name:"initialCoefficients",type:"int256[5]"},{internalType:"contract AggregatorV3Interface",name:"_priceProvider",type:"address"},{internalType:"uint256",name:"_tokenDecimals",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256[3]",name:"values",type:"uint256[3]"}],name:"SetBorders",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetCoefficients",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetDiscountCall",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"SetDiscountPut",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"values",type:"uint8"}],name:"SetDiscountSpread",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetImpliedVolRate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256[4]",name:"values",type:"uint256[4]"}],name:"SetImpliedVolRates",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"min",type:"uint256"},{indexed:!1,internalType:"uint256",name:"max",type:"uint256"}],name:"SetPeriodLimits",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetSettlementFeeShare",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"SetStrikePercentage",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"period",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"strike",type:"uint256"}],name:"calculatePremium",outputs:[{internalType:"uint256",name:"premium",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"coefficients",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"minPeriod",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceProvider",outputs:[{internalType:"contract AggregatorV3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"int256[5]",name:"values",type:"int256[5]"}],name:"setCoefficients",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"min",type:"uint256"},{internalType:"uint256",name:"max",type:"uint256"}],name:"setPeriodLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],ra=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"bool",name:"invalidPositionId",type:"bool"},{internalType:"bool",name:"positionInactive",type:"bool"},{internalType:"bool",name:"isShort",type:"bool"}],name:"AddingCollateralToInvalidPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"AdjustmentResultsInMinimumCollateralNotBeingMet",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"}],name:"AlreadyInitialised",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"bool",name:"invalidPositionId",type:"bool"},{internalType:"bool",name:"positionInactive",type:"bool"},{internalType:"bool",name:"strikeMismatch",type:"bool"},{internalType:"bool",name:"optionTypeMismatch",type:"bool"}],name:"CannotAdjustInvalidPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"}],name:"CannotClosePositionZero",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"}],name:"CannotOpenZeroAmount",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"}],name:"FullyClosingWithNonZeroSetCollateral",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],internalType:"struct OptionToken.PartialCollateralParameters",name:"partialCollatParams",type:"tuple"}],name:"InvalidPartialCollateralParameters",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"originalPositionAmount",type:"uint256"},{internalType:"uint256",name:"splitAmount",type:"uint256"}],name:"InvalidSplitAmount",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"}],name:"MergingUnapprovedPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"}],name:"MustMergeTwoOrMorePositions",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"nominatedOwner",type:"address"}],name:"OnlyNominatedOwner",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"optionMarket",type:"address"}],name:"OnlyOptionMarket",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"OnlyOwner",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"address",name:"trader",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"OnlyOwnerCanAdjustPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"shortCollateral",type:"address"}],name:"OnlyShortCollateral",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"firstPosition",type:"tuple"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"nextPosition",type:"tuple"},{internalType:"bool",name:"ownerMismatch",type:"bool"},{internalType:"bool",name:"strikeMismatch",type:"bool"},{internalType:"bool",name:"optionTypeMismatch",type:"bool"},{internalType:"bool",name:"duplicatePositionId",type:"bool"}],name:"PositionMismatchWhenMerging",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"PositionNotLiquidatable",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"ResultingNewPositionLiquidatable",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"ResultingOriginalPositionLiquidatable",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"}],name:"SplittingUnapprovedPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"strikeId",type:"uint256"}],name:"StrikeIsSettled",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"oldOwner",type:"address"},{indexed:!1,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerNominated",type:"event"},{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],indexed:!1,internalType:"struct OptionToken.PartialCollateralParameters",name:"partialCollateralParams",type:"tuple"}],name:"PartialCollateralParamsSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"positionId",type:"uint256"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"enum OptionToken.PositionUpdatedType",name:"updatedType",type:"uint8"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],indexed:!1,internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"PositionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"URI",type:"string"}],name:"URISet",type:"event"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"amountCollateral",type:"uint256"}],name:"addCollateral",outputs:[{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"bool",name:"isBuy",type:"bool"},{internalType:"bool",name:"isForceClose",type:"bool"},{internalType:"enum OptionMarket.TradeDirection",name:"tradeDirection",type:"uint8"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint256",name:"strikePrice",type:"uint256"},{internalType:"uint256",name:"spotPrice",type:"uint256"},{components:[{internalType:"uint256",name:"freeLiquidity",type:"uint256"},{internalType:"uint256",name:"burnableLiquidity",type:"uint256"},{internalType:"uint256",name:"reservedCollatLiquidity",type:"uint256"},{internalType:"uint256",name:"pendingDeltaLiquidity",type:"uint256"},{internalType:"uint256",name:"usedDeltaLiquidity",type:"uint256"},{internalType:"uint256",name:"NAV",type:"uint256"},{internalType:"uint256",name:"longScaleFactor",type:"uint256"}],internalType:"struct LiquidityPool.Liquidity",name:"liquidity",type:"tuple"}],internalType:"struct OptionMarket.TradeParameters",name:"trade",type:"tuple"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"address",name:"trader",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"optionCost",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"},{internalType:"bool",name:"isOpen",type:"bool"}],name:"adjustPosition",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"int256",name:"pendingCollateral",type:"int256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint256",name:"strikePrice",type:"uint256"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"canLiquidate",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"gwavPremium",type:"uint256"},{internalType:"uint256",name:"userPositionCollateral",type:"uint256"},{internalType:"uint256",name:"convertedMinLiquidationFee",type:"uint256"},{internalType:"uint256",name:"insolvencyMultiplier",type:"uint256"}],name:"getLiquidationFees",outputs:[{components:[{internalType:"uint256",name:"returnCollateral",type:"uint256"},{internalType:"uint256",name:"lpPremiums",type:"uint256"},{internalType:"uint256",name:"lpFee",type:"uint256"},{internalType:"uint256",name:"liquidatorFee",type:"uint256"},{internalType:"uint256",name:"smFee",type:"uint256"},{internalType:"uint256",name:"insolventAmount",type:"uint256"}],internalType:"struct OptionToken.LiquidationFees",name:"liquidationFees",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"}],name:"getOptionPosition",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256[]",name:"positionIds",type:"uint256[]"}],name:"getOptionPositions",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"getOwnerPositions",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPartialCollatParams",outputs:[{components:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],internalType:"struct OptionToken.PartialCollateralParameters",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"}],name:"getPositionState",outputs:[{internalType:"enum OptionToken.PositionState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"}],name:"getPositionWithOwner",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"},{internalType:"address",name:"owner",type:"address"}],internalType:"struct OptionToken.PositionWithOwner",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256[]",name:"positionIds",type:"uint256[]"}],name:"getPositionsWithOwner",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"},{internalType:"address",name:"owner",type:"address"}],internalType:"struct OptionToken.PositionWithOwner[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract OptionMarket",name:"_optionMarket",type:"address"},{internalType:"contract OptionGreekCache",name:"_greekCache",type:"address"},{internalType:"address",name:"_shortCollateral",type:"address"},{internalType:"contract BaseExchangeAdapter",name:"_exchangeAdapter",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"},{components:[{internalType:"bool",name:"isBuy",type:"bool"},{internalType:"bool",name:"isForceClose",type:"bool"},{internalType:"enum OptionMarket.TradeDirection",name:"tradeDirection",type:"uint8"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint256",name:"strikePrice",type:"uint256"},{internalType:"uint256",name:"spotPrice",type:"uint256"},{components:[{internalType:"uint256",name:"freeLiquidity",type:"uint256"},{internalType:"uint256",name:"burnableLiquidity",type:"uint256"},{internalType:"uint256",name:"reservedCollatLiquidity",type:"uint256"},{internalType:"uint256",name:"pendingDeltaLiquidity",type:"uint256"},{internalType:"uint256",name:"usedDeltaLiquidity",type:"uint256"},{internalType:"uint256",name:"NAV",type:"uint256"},{internalType:"uint256",name:"longScaleFactor",type:"uint256"}],internalType:"struct LiquidityPool.Liquidity",name:"liquidity",type:"tuple"}],internalType:"struct OptionMarket.TradeParameters",name:"trade",type:"tuple"},{internalType:"uint256",name:"totalCost",type:"uint256"}],name:"liquidate",outputs:[{components:[{internalType:"uint256",name:"returnCollateral",type:"uint256"},{internalType:"uint256",name:"lpPremiums",type:"uint256"},{internalType:"uint256",name:"lpFee",type:"uint256"},{internalType:"uint256",name:"liquidatorFee",type:"uint256"},{internalType:"uint256",name:"smFee",type:"uint256"},{internalType:"uint256",name:"insolventAmount",type:"uint256"}],internalType:"struct OptionToken.LiquidationFees",name:"liquidationFees",type:"tuple"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"positionIds",type:"uint256[]"}],name:"merge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"nominateNewOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"nominatedOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"partialCollatParams",outputs:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"positions",outputs:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],internalType:"struct OptionToken.PartialCollateralParameters",name:"_partialCollatParams",type:"tuple"}],name:"setPartialCollateralParams",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newURI",type:"string"}],name:"setURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"positionIds",type:"uint256[]"}],name:"settlePositions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"newAmount",type:"uint256"},{internalType:"uint256",name:"newCollateral",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"split",outputs:[{internalType:"uint256",name:"newPositionId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],oa=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"bool",name:"invalidPositionId",type:"bool"},{internalType:"bool",name:"positionInactive",type:"bool"},{internalType:"bool",name:"isShort",type:"bool"}],name:"AddingCollateralToInvalidPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"AdjustmentResultsInMinimumCollateralNotBeingMet",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"}],name:"AlreadyInitialised",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"bool",name:"invalidPositionId",type:"bool"},{internalType:"bool",name:"positionInactive",type:"bool"},{internalType:"bool",name:"strikeMismatch",type:"bool"},{internalType:"bool",name:"optionTypeMismatch",type:"bool"}],name:"CannotAdjustInvalidPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"}],name:"CannotClosePositionZero",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"}],name:"CannotOpenZeroAmount",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"}],name:"FullyClosingWithNonZeroSetCollateral",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],internalType:"struct OptionToken.PartialCollateralParameters",name:"partialCollatParams",type:"tuple"}],name:"InvalidPartialCollateralParameters",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"originalPositionAmount",type:"uint256"},{internalType:"uint256",name:"splitAmount",type:"uint256"}],name:"InvalidSplitAmount",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"}],name:"MergingUnapprovedPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"}],name:"MustMergeTwoOrMorePositions",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"nominatedOwner",type:"address"}],name:"OnlyNominatedOwner",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"optionMarket",type:"address"}],name:"OnlyOptionMarket",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"OnlyOwner",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"address",name:"trader",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"OnlyOwnerCanAdjustPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"address",name:"shortCollateral",type:"address"}],name:"OnlyShortCollateral",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"firstPosition",type:"tuple"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"nextPosition",type:"tuple"},{internalType:"bool",name:"ownerMismatch",type:"bool"},{internalType:"bool",name:"strikeMismatch",type:"bool"},{internalType:"bool",name:"optionTypeMismatch",type:"bool"},{internalType:"bool",name:"duplicatePositionId",type:"bool"}],name:"PositionMismatchWhenMerging",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"PositionNotLiquidatable",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"ResultingNewPositionLiquidatable",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"ResultingOriginalPositionLiquidatable",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"address",name:"caller",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"}],name:"SplittingUnapprovedPosition",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"strikeId",type:"uint256"}],name:"StrikeIsSettled",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"oldOwner",type:"address"},{indexed:!1,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newOwner",type:"address"}],name:"OwnerNominated",type:"event"},{anonymous:!1,inputs:[{components:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],indexed:!1,internalType:"struct OptionToken.PartialCollateralParameters",name:"partialCollateralParams",type:"tuple"}],name:"PartialCollateralParamsSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"positionId",type:"uint256"},{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"enum OptionToken.PositionUpdatedType",name:"updatedType",type:"uint8"},{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],indexed:!1,internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"PositionUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"URI",type:"string"}],name:"URISet",type:"event"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"amountCollateral",type:"uint256"}],name:"addCollateral",outputs:[{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"bool",name:"isBuy",type:"bool"},{internalType:"bool",name:"isForceClose",type:"bool"},{internalType:"enum OptionMarket.TradeDirection",name:"tradeDirection",type:"uint8"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint256",name:"strikePrice",type:"uint256"},{internalType:"uint256",name:"spotPrice",type:"uint256"},{components:[{internalType:"uint256",name:"freeLiquidity",type:"uint256"},{internalType:"uint256",name:"burnableLiquidity",type:"uint256"},{internalType:"uint256",name:"reservedCollatLiquidity",type:"uint256"},{internalType:"uint256",name:"pendingDeltaLiquidity",type:"uint256"},{internalType:"uint256",name:"usedDeltaLiquidity",type:"uint256"},{internalType:"uint256",name:"NAV",type:"uint256"},{internalType:"uint256",name:"longScaleFactor",type:"uint256"}],internalType:"struct LiquidityPool.Liquidity",name:"liquidity",type:"tuple"}],internalType:"struct OptionMarket.TradeParameters",name:"trade",type:"tuple"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"address",name:"trader",type:"address"},{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"optionCost",type:"uint256"},{internalType:"uint256",name:"setCollateralTo",type:"uint256"},{internalType:"bool",name:"isOpen",type:"bool"}],name:"adjustPosition",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"int256",name:"pendingCollateral",type:"int256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"position",type:"tuple"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint256",name:"strikePrice",type:"uint256"},{internalType:"uint256",name:"spotPrice",type:"uint256"}],name:"canLiquidate",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"gwavPremium",type:"uint256"},{internalType:"uint256",name:"userPositionCollateral",type:"uint256"},{internalType:"uint256",name:"convertedMinLiquidationFee",type:"uint256"},{internalType:"uint256",name:"insolvencyMultiplier",type:"uint256"}],name:"getLiquidationFees",outputs:[{components:[{internalType:"uint256",name:"returnCollateral",type:"uint256"},{internalType:"uint256",name:"lpPremiums",type:"uint256"},{internalType:"uint256",name:"lpFee",type:"uint256"},{internalType:"uint256",name:"liquidatorFee",type:"uint256"},{internalType:"uint256",name:"smFee",type:"uint256"},{internalType:"uint256",name:"insolventAmount",type:"uint256"}],internalType:"struct OptionToken.LiquidationFees",name:"liquidationFees",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"}],name:"getOptionPosition",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256[]",name:"positionIds",type:"uint256[]"}],name:"getOptionPositions",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"getOwnerPositions",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],internalType:"struct OptionToken.OptionPosition[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPartialCollatParams",outputs:[{components:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],internalType:"struct OptionToken.PartialCollateralParameters",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"}],name:"getPositionState",outputs:[{internalType:"enum OptionToken.PositionState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"}],name:"getPositionWithOwner",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"},{internalType:"address",name:"owner",type:"address"}],internalType:"struct OptionToken.PositionWithOwner",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256[]",name:"positionIds",type:"uint256[]"}],name:"getPositionsWithOwner",outputs:[{components:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"},{internalType:"address",name:"owner",type:"address"}],internalType:"struct OptionToken.PositionWithOwner[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract OptionMarket",name:"_optionMarket",type:"address"},{internalType:"contract OptionGreekCache",name:"_greekCache",type:"address"},{internalType:"address",name:"_shortCollateral",type:"address"},{internalType:"contract BaseExchangeAdapter",name:"_exchangeAdapter",type:"address"}],name:"init",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"},{components:[{internalType:"bool",name:"isBuy",type:"bool"},{internalType:"bool",name:"isForceClose",type:"bool"},{internalType:"enum OptionMarket.TradeDirection",name:"tradeDirection",type:"uint8"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint256",name:"strikePrice",type:"uint256"},{internalType:"uint256",name:"spotPrice",type:"uint256"},{components:[{internalType:"uint256",name:"freeLiquidity",type:"uint256"},{internalType:"uint256",name:"burnableLiquidity",type:"uint256"},{internalType:"uint256",name:"reservedCollatLiquidity",type:"uint256"},{internalType:"uint256",name:"pendingDeltaLiquidity",type:"uint256"},{internalType:"uint256",name:"usedDeltaLiquidity",type:"uint256"},{internalType:"uint256",name:"NAV",type:"uint256"},{internalType:"uint256",name:"longScaleFactor",type:"uint256"}],internalType:"struct LiquidityPool.Liquidity",name:"liquidity",type:"tuple"}],internalType:"struct OptionMarket.TradeParameters",name:"trade",type:"tuple"},{internalType:"uint256",name:"totalCost",type:"uint256"}],name:"liquidate",outputs:[{components:[{internalType:"uint256",name:"returnCollateral",type:"uint256"},{internalType:"uint256",name:"lpPremiums",type:"uint256"},{internalType:"uint256",name:"lpFee",type:"uint256"},{internalType:"uint256",name:"liquidatorFee",type:"uint256"},{internalType:"uint256",name:"smFee",type:"uint256"},{internalType:"uint256",name:"insolventAmount",type:"uint256"}],internalType:"struct OptionToken.LiquidationFees",name:"liquidationFees",type:"tuple"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"positionIds",type:"uint256[]"}],name:"merge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"nominateNewOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"nominatedOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"partialCollatParams",outputs:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"positions",outputs:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"enum OptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"collateral",type:"uint256"},{internalType:"enum OptionToken.PositionState",name:"state",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"penaltyRatio",type:"uint256"},{internalType:"uint256",name:"liquidatorFeeRatio",type:"uint256"},{internalType:"uint256",name:"smFeeRatio",type:"uint256"},{internalType:"uint256",name:"minLiquidationFee",type:"uint256"}],internalType:"struct OptionToken.PartialCollateralParameters",name:"_partialCollatParams",type:"tuple"}],name:"setPartialCollateralParams",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newURI",type:"string"}],name:"setURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"positionIds",type:"uint256[]"}],name:"settlePositions",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"positionId",type:"uint256"},{internalType:"uint256",name:"newAmount",type:"uint256"},{internalType:"uint256",name:"newCollateral",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"split",outputs:[{internalType:"uint256",name:"newPositionId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}],la=[{inputs:[{internalType:"address",name:"_lyraRegister",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"boardId",type:"uint256"}],name:"BoardAlreadySettled",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"boardId",type:"uint256"},{internalType:"uint256",name:"boardExpiry",type:"uint256"},{internalType:"uint256",name:"currentTime",type:"uint256"}],name:"BoardExpired",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"boardId",type:"uint256"}],name:"BoardIsFrozen",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"enum IOptionMarket.NonZeroValues",name:"valueType",type:"uint8"}],name:"ExpectedNonZeroValue",type:"error"},{inputs:[{internalType:"address",name:"thrower",type:"address"},{internalType:"uint256",name:"strikeId",type:"uint256"}],name:"InvalidStrikeId",type:"error"},{inputs:[{internalType:"contract IOptionMarket",name:"_optionMarket",type:"address"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"uint256",name:"iterations",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"fullQuotes",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"},{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IOptionMarket",name:"_optionMarket",type:"address"},{internalType:"uint256",name:"strikeId",type:"uint256"},{internalType:"uint256",name:"iterations",type:"uint256"},{internalType:"enum IOptionMarket.OptionType",name:"optionType",type:"uint8"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"quote",outputs:[{internalType:"uint256",name:"totalPremium",type:"uint256"},{internalType:"uint256",name:"totalFee",type:"uint256"}],stateMutability:"view",type:"function"}],pa=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],Wt=[{inputs:[{internalType:"address",name:"_aggregator",type:"address"},{internalType:"address",name:"_accessController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"int256",name:"current",type:"int256"},{indexed:!0,internalType:"uint256",name:"roundId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"updatedAt",type:"uint256"}],name:"AnswerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"roundId",type:"uint256"},{indexed:!0,internalType:"address",name:"startedBy",type:"address"},{indexed:!1,internalType:"uint256",name:"startedAt",type:"uint256"}],name:"NewRound",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"accessController",outputs:[{internalType:"contract AccessControllerInterface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"aggregator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_aggregator",type:"address"}],name:"confirmAggregator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"description",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_roundId",type:"uint256"}],name:"getAnswer",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint80",name:"_roundId",type:"uint80"}],name:"getRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_roundId",type:"uint256"}],name:"getTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestAnswer",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestRound",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[],name:"latestTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint16",name:"",type:"uint16"}],name:"phaseAggregators",outputs:[{internalType:"contract AggregatorV2V3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"phaseId",outputs:[{internalType:"uint16",name:"",type:"uint16"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_aggregator",type:"address"}],name:"proposeAggregator",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"proposedAggregator",outputs:[{internalType:"contract AggregatorV2V3Interface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint80",name:"_roundId",type:"uint80"}],name:"proposedGetRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[],name:"proposedLatestRoundData",outputs:[{internalType:"uint80",name:"roundId",type:"uint80"},{internalType:"int256",name:"answer",type:"int256"},{internalType:"uint256",name:"startedAt",type:"uint256"},{internalType:"uint256",name:"updatedAt",type:"uint256"},{internalType:"uint80",name:"answeredInRound",type:"uint80"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_accessController",type:"address"}],name:"setController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Te=1e3,wt=60,He=60,$e=24,an=e=>e*$e*He*wt*Te,ua=e=>Math.floor(e/Te/wt/He/$e),Xe=e=>Math.floor(e/Te),da=e=>{const t=e/Te/wt/He,i=Math.floor(t%$e),a=Math.floor(t/$e),s=Math.floor(t*He);return i===0&&a===0?`${s}m`:`${a}d:${i}h`},ya={[me]:"tz_aYA5g8dBegbWo1l6TQEY7cKhGZCh1",[Ze]:""},ne=e=>{const t=ya[e];if(!t)throw new Error(`No Alchemy api key found for chainId ${e}`);return new fi(e,t)},sn=e=>new Ti({provider:ne(e)}),xe=()=>{if(!window.ethereum)throw new Error("No Ethereum provider found");return new bi(window.ethereum).getSigner()},ca="/assets/ETH-fe35d2b1.svg",ma="/assets/BTC-03fbacc9.svg",Ta="/assets/WETH-2ba67e25.svg",fa="/assets/WBTC-f0287338.svg",qt="/assets/USDC-5a7f3d86.svg",ba="/assets/USDT-2e53b5e9.svg",ha="/assets/DAI-b460716b.svg",Qe={[me]:[{name:"Ethereum",symbol:"ETH",decimals:18,address:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",isETH:!0,icon:ca,isSwappable:!0},{name:"Bitcoin",symbol:"BTC",decimals:8,address:"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",icon:ma},{name:"Wrapped Ethereum",symbol:"WETH",decimals:18,address:"0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",icon:Ta,isSwappable:!0},{name:"Wrapped Bitcoin",symbol:"WBTC",decimals:8,address:"0x2f2a2543B76A4166549F7aaB2e75Bef0aefC5B0f",icon:fa,isSwappable:!0},{name:"Dai",symbol:"DAI",decimals:18,address:"0xDA10009cBd5D07dd0CeCc66161FC93D7c9000da1",icon:ha,isSwappable:!0,isStable:!0},{name:"USD Coin",symbol:"USDC",decimals:6,address:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",icon:qt,isSwappable:!0,isStable:!0},{name:"USDC.e",symbol:"USDC.e",decimals:6,address:"0xFF970A61A04b1cA14834A43f5dE4533eBDDB5CC8",icon:qt,isSwappable:!0,isStable:!0},{name:"Tether",symbol:"USDT",decimals:6,address:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",icon:ba,isSwappable:!0,isStable:!0}]},We={},qe={},Gt=Object.keys(Qe);for(let e=0;e<Gt.length;e++){const t=Gt[e];We[t]={},qe[t]={};let i=Qe[t];for(let a=0;a<i.length;a++){const s=i[a];We[t][s.symbol]=s,qe[t][s.address]=s}}const he=(e,t)=>{if(!We[e])throw new Error(`No tokens found for chainId ${e}`);const a=We[e][t];if(!a)throw new Error(`Incorrect symbol "${t}" for chainId ${e}`);return a},Vt=(e,t)=>{if(!qe[e])throw new Error(`No tokens found for chainId ${e}`);const a=qe[e][t];if(!a)throw new Error(`Incorrect address "${t}" for chainId ${e}`);return a},ga=e=>{const t=Qe[e];if(!t)throw new Error(`No tokens found for chainId ${e}`);return t.filter(a=>a.isSwappable)},rn=e=>he(e,"USDC.e").address,on=e=>he(me,e).icon,De={[me]:{TxBuilder:{address:"0x9C22123ffecAf575F93e5FA21DEeb43696A10ad3",abi:Yi},TxBuilderOpen_Lyra_BTC:{address:"0x90481D5ed869be0E5bf11e5a2a8dCF632b9FAEf5",abi:zi},TxBuilderOpen_Lyra_ETH:{address:"0x0aaE7bFE3D404Bb6BA3502Ced966Aea6c4F17222",abi:Zi},TxBuilderOpen_Hegic:{address:"0xBe5aE8dbB22fa18BeBA05057a171266383a8d5B7",abi:Xi},StopOrder_Hegic:{address:"0x83ca705E8eEE363b16935D5FCbC3514530d41C74",abi:Qi},StopOrder_Lyra_BTC:{address:"0xDE51a10A711412353e825623F58F56d9D0EA98cF",abi:Ji},StopOrder_Lyra_ETH:{address:"0x06a6815b91c88BDa19832Ada861077e123C34FFb",abi:ea},Exchanger:{address:"0x2f7e0Ee16FFd6BA0721158F74934Ff0e42Df6131",abi:ta},Hegic_OperationalTreasury:{address:"0xec096ea6eB9aa5ea689b0CF00882366E92377371",abi:na},Hegic_PositionManager:{address:"0x5fe380d68fee022d8acd42dc4d36fbfb249a76d5",abi:ia},Hegic_Strategy:{abi:aa},Hegic_PriceCalculator:{abi:sa},Lyra_OptionToken_BTC:{address:"0x0e97498F3d91756Ec7F2d244aC97F6Ea9f4eBbC3",abi:ra},Lyra_OptionToken_ETH:{address:"0xe485155ce647157624C5E2A41db45A9CC88098c3",abi:oa},Lyra_Quoter:{address:"0x23236b4c7772636b5224df56Be8168A2f42df31C",abi:la},Rysk_PriceKeeper_ETH:{address:"",abi:[]},Chainlink_BTC:{address:"0x6ce185860a4963106506C203335A2910413708e9",abi:Wt},Chainlink_ETH:{address:"0x639Fe6ab55C921f74e7fac1ee960C0B6293ba612",abi:Wt},Uniswap_Quoter:{address:"0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6",abi:mi.abi},ArbitraryContract:{address:"",abi:[]}},[Ze]:{}},xa=()=>{for(const e in De){const t=De[e],i=Qe[e];i&&(i.forEach(a=>{a.isETH||(t[a.symbol]={address:a.address,abi:pa})}),De[e]={...t})}};xa();const Z=(e,t)=>{if(!De[e])throw new Error(`Unknown chainId ${e}`);const i=De[e][t];if(!i)throw new Error(`Unknown contract "${t}" for chainId ${e}`);return[i.address,i.abi]},Ca=(e,t)=>Z(e,t)[0],ln=(e,t)=>Z(e,t)[1],_a={[me]:{short:{CALL_100_BTC:"0x527d1086C3DD22FcdB338F69D47A1e4bFE11E539",CALL_100_ETH:"0x09a4B65b3144733f1bFBa6aEaBEDFb027a38Fb60",CALL_110_BTC:"0x377191F680b52ce3d0060388fEF01be7ef68e3d5",CALL_110_ETH:"0xF48f571DdD77dba9Ae10fefF6df04484685091D9",CALL_120_BTC:"0x8Fb8529695237D4004cffb21499e7E49E982786a",CALL_120_ETH:"0x96416b82C9DFA7649570c784Eb0D0FFcDE361cFE",CALL_130_BTC:"0x32563D6151891c0A8d56eD644AcDEa6FE5f4E4eB",CALL_130_ETH:"0xf8b8b54bE1Eb37E76873670Ac9DE3C28b507142C",PUT_100_BTC:"0xA8DF600289bEc25602741756f55f27ffFDAB69a6",PUT_100_ETH:"0xaA0DfBFb8dA7f45BB41c0fB68B71FAEB959B22aa",PUT_70_BTC:"0x7066286C1AA0FeBE0f63eF8a44F6Fea9F05FFBE0",PUT_70_ETH:"0x35EF16F3c329a54050Ca120145340dfC2b4F9541",PUT_80_BTC:"0x06c3Ba025bEd24Ea38c2BdDA4bcD2A7F9f5C30e1",PUT_80_ETH:"0x77C8d12d9E2D21f6eE02E8ccA332fDe4BE5C2465",PUT_90_BTC:"0xe115beD3b0752BBbbEF5C423021b464bBF93dC2c",PUT_90_ETH:"0x6B7e5906F53d8bB365f4A6fA776Fd0f0caf57881","CALL-SPREAD_10_BTC":"0x5D0bc0d08e8A7C09d10df9BB2498f1d4aB986e6A","CALL-SPREAD_10_ETH":"0x5c59f7ec23C0Bace3B1959C99A43FFd30078E5bE","CALL-SPREAD_20_BTC":"0x597cdD5D4CEC7FA2851Cc0cfd93d6915c926a107","CALL-SPREAD_20_ETH":"0x4490ad3c0c1A61061E88a3eaD661bFe16225A370","CALL-SPREAD_30_BTC":"0xc822F483dAE467721123eA60D3D233e7ac68802f","CALL-SPREAD_30_ETH":"0x610D7feB49DD18BBC20E4dbe600c53E1cDf6d9F1","PUT-SPREAD_10_BTC":"0x45b9D63F1998ca31151981792849a64342C88631","PUT-SPREAD_10_ETH":"0xc4C3b5050D574CBF3eE0b613104cF5C4E47625d4","PUT-SPREAD_20_BTC":"0x606e34C7008f1425C3a69446de4cAd3D7c6fd96D","PUT-SPREAD_20_ETH":"0xa1c290D16E2290EA536a13Ba7cc3Df0000A0f1A6","PUT-SPREAD_30_BTC":"0x71D89f44C71252f319Cd9652f7886c3834685A58","PUT-SPREAD_30_ETH":"0x8F11Ed84e9Dc76db4392b428A0eAF98Ce72c3752"},medShort:{CALL_100_BTC:"0x20ee3e61e8f1eB8ae959abf5F78bA8731d010Ac3",CALL_100_ETH:"0x6418C3514923a6464A26A2ffA5f17bF1efC96a21",CALL_110_BTC:"0xaFA483B18FE66251C8306C7018028f674F653012",CALL_110_ETH:"0xaF38a4d9153B149F05FA85C2cCFAaA677c99040E",CALL_120_BTC:"0xFe35F1AB7e18930d4316B86fCefBCF053bf44A45",CALL_120_ETH:"0x1060e80c1156060a1E8DdB9C64Afe74564865Ee2",CALL_130_BTC:"0xe4DB400BFC4D627559D592db4ca2839cb87Fbbfc",CALL_130_ETH:"0xc00103524932d86770d4F671107b0E170BD0fe6c",PUT_100_BTC:"0xE0f083fd87ebAEBFCfa8236098048105d32639E4",PUT_100_ETH:"0x2739A4C003080A5B3Ade22b92c3321EDa2Da3A9e",PUT_70_BTC:"0x52442a8C632D4c998A8BDBf44A70481AA5599b0e",PUT_70_ETH:"0x48EcF46Aa51992a064aB172439ABFE182F39b478",PUT_80_BTC:"0xb02343D33d2447870E38b3452Ef59d0De7b3289d",PUT_80_ETH:"0xb58ccd922B57422d0497904B7D9fccB922b8aaDf",PUT_90_BTC:"0x7d0c3FDF0e8A6f475Ed1834ae05fDa1E519fd227",PUT_90_ETH:"0x3e2a0fE32Cc000d87D9e5D6ed8b3D64e9c74C752","CALL-SPREAD_10_BTC":"0x6FF946F2BB609B63910a774E193F29CdE7E8fD5f","CALL-SPREAD_10_ETH":"0x0ac1995C43B5566760AD1D88B812f3e51e12eCc6","CALL-SPREAD_20_BTC":"0x7E8e5eaD9A1b8F0533F614a736214a95835c79d7","CALL-SPREAD_20_ETH":"0x1068daF4CD8fDe2000B6FbE8Ec94F106dc08a40E","CALL-SPREAD_30_BTC":"0x3b4900D5a20dbEbCE44eDF8f6B68Dae32E990Ed0","CALL-SPREAD_30_ETH":"0x24db3145F45aAF2c54f586C66b801c42c8658671","PUT-SPREAD_10_BTC":"0x88386f02c46d8D7b2C9E4aEf3b4246A438F72693","PUT-SPREAD_10_ETH":"0x31e6Cd148fe51830E7a97262eE9cf52Fe5256B08","PUT-SPREAD_20_BTC":"0x72Ac8A96b8E79466AdcE711EcBD1Ec5968b371C8","PUT-SPREAD_20_ETH":"0x9e1072E5119C9345d9543a5Ba1EFeDBAE9bEF2AD","PUT-SPREAD_30_BTC":"0x01381e0EDdB57678257179d2cB472C3e8e54202c","PUT-SPREAD_30_ETH":"0xE8dD9Cc3A4Bd078f3D36043f259381d5B50D4B45"},medLong:{CALL_100_BTC:"0x21a4b4441AA957735902507A72A58A3a1Caaa0dC",CALL_100_ETH:"0xE377A1a97237b3B89a96d8B731A2ab10d5DaC16C",CALL_110_BTC:"0x6c46e2531a42F618F2ae452971DC9a7c6AD48D15",CALL_110_ETH:"0x05458B7d9531EaD242290De60bEaa3cC10C87560",CALL_120_BTC:"0xe259410Bbfb45CE89FDA81ec0A97d36Da8Db4374",CALL_120_ETH:"0x79F87E88088293FE34dEf4eBe71fBFa5367220B4",CALL_130_BTC:"0x27806482457FC98F9C2e724b5E604C66BB5ba121",CALL_130_ETH:"0xae2F4e15564995af79b7dd2378B2680f7Facc342",PUT_100_BTC:"0x035b965c5B7bC20E00358ACF1794d2248eA1932A",PUT_100_ETH:"0xf711D0BC60F37cA28845BA623ccd9C635E5073A1",PUT_70_BTC:"0x55c4532e1790592120b7b27436842caD203E7CD3",PUT_70_ETH:"0xF55F6d98e2F48F8D46757D5A6e225bf0ADC9651C",PUT_80_BTC:"0x8dD239e0e51BCAAd503b06D818ce811e7D99c1Af",PUT_80_ETH:"0xdF30cdb7abb3Ca707b82359A349D3b0C94d4a421",PUT_90_BTC:"0xE56BEAfAe4731A21eF83fe81F63b95055e81E374",PUT_90_ETH:"0x33a4B4403B8C6349371CbDf539138D78ec0Aab66","CALL-SPREAD_10_BTC":"0x8e3063D5dCbe66E58053C3Bc8E0BC8dDFe43D585","CALL-SPREAD_10_ETH":"0xBB318170Ce1c2dc79B564f33F92BacaadaBd22de","CALL-SPREAD_20_BTC":"0x324be893029D982c187F0333E7aa1d44365d2676","CALL-SPREAD_20_ETH":"0xb89d7eB2bc675347BEb685ff1bE1557E983beFe1","CALL-SPREAD_30_BTC":"0x530289340C6d2Ef02140054Ae7F91C293fd586CF","CALL-SPREAD_30_ETH":"0x929d20D9e1A6A90bf057857C8BA09271f1BaadA2","PUT-SPREAD_10_BTC":"0x7267091cFc9825a4A1dF36C26d412FeFD788d935","PUT-SPREAD_10_ETH":"0x2B93645f310E016c1a6d1738DCec0f18621F71d0","PUT-SPREAD_20_BTC":"0x9ab2f8530150799CDdAC35799d18Ad2fe05Bf8c3","PUT-SPREAD_20_ETH":"0x4EE21aB8bc165Cd3e6C45676F9f64426Ffc2d67b","PUT-SPREAD_30_BTC":"0xBa883223A1757eEB781d02C383926c308d4843f4","PUT-SPREAD_30_ETH":"0xf87C8C7587055FA62082E8ed447fe68D98805fF2"},long:{CALL_100_BTC:"0xc07fBf677f417bb9FfDD8248A74c7FBcCFaDAe9e",CALL_100_ETH:"0x2727B807D22fCAeB7F900F49894054Ed92b9125B",CALL_110_BTC:"0x14d25367102A931E2E2F587F4ED94087dc585fd0",CALL_110_ETH:"0xE53a20c824cEAB8151AF8Fc92E7Eb689cFbD1231",CALL_120_BTC:"0xBAbccB37338488AFBaBECAE2C3D21b9a71289A73",CALL_120_ETH:"0xB7b36483B256290435a060805bdF15B3f2b122eb",CALL_130_BTC:"0x9fA4DFfBE3B129988e0d09536b0E2D74F6bF7D91",CALL_130_ETH:"0x4dC39763ccC861dB1c8e80c34C0079c9A12f03E4",PUT_100_BTC:"0xEd46f602212d1CbaCd699C876b4A49761421bf97",PUT_100_ETH:"0x015FAA9aF7599e6cea597EBC7e7e04A149a3E992",PUT_70_BTC:"0xa26541ccE18CcC6E21360562d34044ceb3B5A40e",PUT_70_ETH:"0x5BBe6C4A66D4a48442dc0837a0eA859a11D7766C",PUT_80_BTC:"0xFD203c73851986ad7e7B99457AeafF3d98e76228",PUT_80_ETH:"0x7FD5E8B2Ef25A105bf6B1c45f62d8925Eaa068Bc",PUT_90_BTC:"0x02d730e3dEb3B5876fE2Cba59423ef1Db8211DA1",PUT_90_ETH:"0x3031EA515c2274024D93A8D3BfA91ce920E1192E","CALL-SPREAD_10_BTC":"0x0c1C4D9dFd51093bE1e4Bab1b565113B339835F6","CALL-SPREAD_10_ETH":"0xCe5e136688A1553C67b3B39Ff5366595dD0F771E","CALL-SPREAD_20_BTC":"0x7b92a9f268bab14F0FAee4337B01D563AE132Bc3","CALL-SPREAD_20_ETH":"0xe3F646CB987a9d16eb71B8d0883744e55c95862a","CALL-SPREAD_30_BTC":"0x223b806Bab0CA844a91b247fE0Ba179E11EAA728","CALL-SPREAD_30_ETH":"0x199DB958f00F150438E5b9276ff30617D3f83ebF","PUT-SPREAD_10_BTC":"0x66F54921b32cCA36767D2C272Dda64D5152B92C4","PUT-SPREAD_10_ETH":"0xfcd40dDe82b699D455B3D073196d580227C2Fba6","PUT-SPREAD_20_BTC":"0x8c77f5427B40ab2414dC9bca48c74928BFe17Dd1","PUT-SPREAD_20_ETH":"0xbAe8114E3A2EA5aF5e2b3c8F6FF37714f6D4afFB","PUT-SPREAD_30_BTC":"0x6D79b82701e4017887d499Ba131FD336ceA6A4CC","PUT-SPREAD_30_ETH":"0x9945Eb8ac1F4c524fe7Da710ff3068969A329fBA"}}},ka={[me]:{PUT_100_BTC:"0x4567600c2c813322F0CBb358a8d083296A7eEA37",PUT_100_ETH:"0xB72FC913e45522cD721252476fEfB7F50a65E23A",PUT_70_BTC:"0x3aFbaf00a6C42e6BE67f8a618b17fB3D441C1898",PUT_70_ETH:"0xf3625e26cb920f762dEC8DB4fE4845E9384313C0",PUT_80_BTC:"0x9C3BBe90191F8311939A34737c02A6B49e27caA5",PUT_80_ETH:"0x58051Cb78094551afC202C50085B13bF00BF624E",PUT_90_BTC:"0x56A2dC3fAc4bE0A1716c938295e141195e4A1cb3",PUT_90_ETH:"0x1AF37c8412bCdAa6C6dD4D2E2aDae2B8292603D4",CALL_100_BTC:"0xAA4483Da5c4D17830dE9a843d07C37b3eC028d9F",CALL_100_ETH:"0xC62a0b7e480a23BdCfe13EA08BDAceDc278a14C1",CALL_110_BTC:"0x04BFC83f6277cf50dFB032EFd348316aACbD7863",CALL_110_ETH:"0x6316BC5f5dF141ae88C436Fe6047D334f1B7e485",CALL_120_BTC:"0x965Ded687bc0Da3388c6925e0Eb330bD44629B77",CALL_120_ETH:"0x321F8A71e8268f50eBd2f748D524E7750AD70798",CALL_130_BTC:"0x4b350b7457b54C5A76828f81472f2719D801D0D5",CALL_130_ETH:"0xffdc9da896d3301DE596b16a389138B70b1CBAdb","CALL-SPREAD_10_BTC":"0xD3872581C3f7DE832Ecc9Aa51eb525AC9Ffc41d2","CALL-SPREAD_10_ETH":"0x3BC74C993e1E85ffB5e242402aEc3e90DCfa249f","CALL-SPREAD_20_BTC":"0x7f6a7d60c6f7ac50BD0efA677D397d9cd61fC3a9","CALL-SPREAD_20_ETH":"0x8C335E897B04B2Ca569Ec733f6242cDe33917094","CALL-SPREAD_30_BTC":"0x631c5EFb3e9D2536F9c9c9d7635e2B01363C51C5","CALL-SPREAD_30_ETH":"0xAe4897D4d3742F7f9C6A1eA01447EA3061bD6de2","PUT-SPREAD_10_BTC":"0xa4A32102a2c1d3Bf01A73B66571B440795835ff5","PUT-SPREAD_10_ETH":"0x5a4Dc7011CA0be61c42957cDC36D508d45010D8B","PUT-SPREAD_20_BTC":"0x0cC3559beCa7bB605348B1a7B4D90963672C880a","PUT-SPREAD_20_ETH":"0xeb38c2Ba3125733e9636eAB7C3c2e7a2C4A11534","PUT-SPREAD_30_BTC":"0x4CE72803543da3f563Ef76592945C57FBE7fce38","PUT-SPREAD_30_ETH":"0xDB044975100aE87d0eEDd804D9E6083a8406fdAe"}},Pt=e=>{const t=_a[e];if(!t)throw new Error(`No Hegic strategies found for chainId ${e}`);return t},Sa=(e,t)=>{const i=Pt(e),a=ua(t);if(a<7||a>90)return;let s;return a<14?s=i.short:a<30?s=i.medShort:a<60?s=i.medLong:a<=90&&(s=i.long),s},va=e=>{const t={},i=Pt(e);return Object.values(i).forEach((a,s)=>{const r=Object.keys(t)[s];for(const o in a){const l=a[o];t[`${o}_${r}`]=l}}),t},wa=e=>{const t=Pt(e),i=[];return Object.values(t).forEach(a=>{i.push(...Object.values(a))}),i},Pa=(e,t)=>{const i=ka[e];if(!i)throw new Error(`No Hegic Price Calculator address found for chainId ${e}`);const a=i[t];if(!a)throw new Error(`No Hegic Price Calculator address found for strategy key ${t}`);return a},pn=(e,t,i)=>{const a=ln(e,`Hegic_${i}`);return new z(t,a,ne(e))},Aa=(e,t)=>{const i=Pa(e,t);return pn(e,i,"PriceCalculator")},un=(e,t)=>pn(e,t,"Strategy"),At=["ETH","BTC"],Q=18,Ba=18,Da=8,yt=6,Bt={ETH:Ba,BTC:Da},Ea=8,Ma=8,Le=6,dn=2,yn=3,cn=e=>{let t=e.reason??e.message;return t==="Internal JSON-RPC error."&&(t=e.data.message),t},Ia=e=>e.includes("User rejected the request")?"User rejected the request.":e.includes("user rejected transaction")?"User rejected transaction.":e.includes("Request of type 'wallet_switchEthereumChain' already pending")?"Switching network request is already pending.":e.includes("Connector already connected")?"Wallet is already connected.":e.includes("Already processing eth_requestAccounts")?"Please, log in to your wallet account.":e.includes("Too little received")?"Slippage set too low. Please consider increasing it for successful strategy purchase.":e,le=e=>{if(typeof e!="bigint")throw new TypeError(`Invalid BigInt: ${e}`)},mn=e=>{if(typeof e!="number"&&typeof e!="string")throw new TypeError(`Invalid amount: ${e}`)},ja=e=>{if(typeof e!="string")throw new TypeError(`Invalid String: ${e}`)},ie=(e,t=",")=>{mn(e);const i=e.toString().split(".");return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,t),i.join(".")},Oa=e=>{mn(e);const t=e.toString(),i=t.indexOf(".");if(i!==-1){const a=t.match(/[1-9]/)[0];return t.indexOf(a,i)-i}return 0},Je=(e,t,i)=>{let a=e.toString();if(ee(t))return a;if(t===0)return a.split(".")[0];const s=a.indexOf(".");if(s!==-1){let o=a.length-s-1;if(o>t){const l=a.substr(0,a.length-(o-t));if(i)if(Number(l)===0){const p=Oa(a);a=a.substr(0,a.length-(o-p))}else a=l;else a=l}}return a},Tn=(e,t)=>{let i=e.toString();const a=i.indexOf("."),s=a!==-1,r=s?i.length-a-1:0;return r<t&&(i+=+s?"":".",i+="0".repeat(t-r)),i},Fa=e=>{const t=e.toString();return t.indexOf(".")!==-1?parseFloat(t):e},Na=e=>{const t=e.toString(),[i,a]=t.split(".");return a==="0".repeat(a==null?void 0:a.length)?i:t},La=(e,t)=>{var s;let i=e.toString().replace(/^\./g,"").replace(/[^0-9.]/g,"").replace(/^0\d/,"");return((s=i.match(/\./g))==null?void 0:s.length)>1&&(i=(o=>o.replace(/\.$/,""))(i)),i=Je(i,t?0:Le),i},Me=(e,t,i)=>ie(La(e,i),t),pe=(e,t=",")=>(ja(e),Number(e.split(t).join(""))),Dt=(e,t)=>Math.round(e*10**t)/10**t,H=(e,t=Q,i)=>{le(e);let a=Number(e)/10**t;return typeof i<"u"&&(a=Math.round(a*10**i)/10**i),String(a).includes("e")?0:a},et=(e,t)=>(le(e),e*BigInt(10**t)),fn=(e,t)=>(le(e),e/BigInt(10**t)),$=(e,t=Q)=>{if(t<Le)throw new Error("Converting number to BigInt without expanding decimals is not safe.");const i=Math.floor(Number(e)*10**Le);return et(BigInt(i),t-Le)},W=(e,t=dn,i=Q,a=!1)=>{le(e);let s=H(e,i);return s=Je(s,t),s=Tn(s,t),a||(s=Na(s)),s=ie(s),String(s)},bn=(e,t=yn,i=Q,a)=>{le(e);let s=H(e,i);return s=Je(s,t,a),s=Fa(s),s=ie(s),String(s)},Oe=(e,t,i,a)=>{le(e);const s=t?W:bn;return ee(i)&&(i=t?dn:yn),s(e,i,a,!t)},Et=(e,t,i)=>{le(e);const a=i-t;return(a<0?fn:et)(e,Math.abs(a))},ye=(e,t)=>Et(e,t,Q),Ce=(e,t)=>Et(e,Q,t),hn=(e,t)=>{le(e);const i=H(e)*t;return $(i)},Ra=(e,t,i=Q)=>(e=et(e,i),e/t),gn=(e,t,i=Q)=>{le(e);const a=i-t,s=fn(e,a);return et(s,a)},ve=e=>(le(e),e<0n?-e:e),ct=e=>-ve(e),be=e=>{if(typeof e!="object")throw new Error(`Invalid bigNumberData: ${e}`);const t={};for(const i in e){let a=e[i];Y.isBigNumber(a)&&(a=a.toBigInt()),t[i]=a}return t},Ge=e=>{const t=pe(e);return $(t)},Ua=e=>{const t=H(e);return Me(t)},Ha=()=>{const e=[di];if(e.length!==St.length)throw new Error("Invalid number of wagmi chains.");const{chains:t,publicClient:i,webSocketPublicClient:a}=pi(e,[yi()]);return ti({autoConnect:!0,publicClient:i,webSocketPublicClient:a,connectors:[new ui({chains:t,options:{name:"Injected",shimDisconnect:!0}})]})},xn=e=>{switch(e){case me:return"https://arbiscan.io";case Ze:return"https://optimistic.etherscan.io";default:return"https://etherscan.io"}},$a=async(e,t)=>{const i=Z(e,`Chainlink_${t}`),a=ne(e),r=(await new z(...i,a).latestAnswer()).toBigInt();return ye(r,Ma)};const ce=b.forwardRef(function({children:t,className:i,style:a,isDisabled:s,onClick:r,type:o},l){const p=E(i,o&&`Button_${o}`),d=o==="complex";return n.jsx("button",{className:E("Button",p),ref:l,disabled:s,onClick:r,"data-text":t,style:a,children:d?n.jsx("span",{children:t.toString()}):t})}),Cn=b.createContext(null),K=()=>{const e=b.useContext(Cn),{address:t,isConnected:i}=ni();return{account:e??t,isConnected:i}},Wa=(e,t,i)=>{t=_n(t);const a=xn(e)+"/tx/"+i;console.log(t.text,`
`,a),gt.success(n.jsxs("div",{children:[n.jsx("div",{children:t.node}),n.jsx("br",{}),i&&n.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:"View transaction"})]}))},_n=e=>{if(typeof e=="string"){const t=e;e={text:t,node:t}}return e},qa=e=>{e=_n(e),console.log(e.text),gt.success(e.node)},we=(e,t)=>{const i=cn(e),a=Ia(i);console.error(e),gt.error(n.jsx("div",{children:a})),t&&t(!1)};function kn(){const{connect:e,connectors:t}=ii({onError:s=>{we(s)}}),{disconnect:i}=ai(),a=t[0];return{connectWallet:()=>e({connector:a}),disconnectWallet:i}}const Ga=()=>{const{isOpen:e,openPopup:t,closePopup:i}=nn(),a=E(e&&"open"),s=G(),{account:r,isConnected:o}=K(),{connectWallet:l,disconnectWallet:p}=kn(),d=c=>c.slice(0,9)+"..."+c.slice(-15),u=()=>n.jsx(ce,{type:"complex",onClick:l,children:"Connect Wallet"}),y=()=>n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"Wallet__header",onClick:t,children:n.jsxs("div",{className:"Wallet__address",children:[n.jsx("img",{src:Wi,alt:"Wallet icon"}),n.jsx("span",{children:d(r)})]})}),n.jsxs("div",{className:"Wallet__body",onClick:c=>c.stopPropagation(),children:[n.jsx("button",{className:"close-btn",onClick:i,children:n.jsx("img",{src:Gi,alt:"x"})}),n.jsxs("a",{className:"Wallet__link",href:`${xn(s)}/address/${r}`,rel:"noreferrer",target:"_blank",children:[n.jsx("img",{src:qi,alt:"external link"}),n.jsx("span",{children:"View on explorer"})]}),n.jsx("div",{className:"Wallet__inner-address",children:"("+d(r)+")"}),n.jsx(ce,{className:"Wallet__button",onClick:p,children:"Disconnect wallet"})]})]});return n.jsx("div",{className:E("Wallet",a),children:o?y():u()})};const Va="/assets/dropdown-fc81e803.svg",Pe=({className:e,options:t,defaultValue:i,defaultOption:a,onChange:s,iconNode:r,iconTextNode:o,...l})=>{const p=r||o,d=({children:c,...m})=>n.jsxs(Ci.Control,{...m,children:[r&&n.jsx("div",{className:"Selector__icon",children:r}),o&&n.jsx("div",{className:"Selector__icon Selector__icon_text",children:o}),c]}),u=c=>{const m=T=>T.value===c,g=t.find(T=>T.options);let f;return g?t.forEach(T=>{if(f)return;f=(T.options??[T]).find(m)}):f=t.find(m),f},y=E(e,p&&"Selector_with-icon");return n.jsx(xi,{...l,options:t,defaultValue:a??u(i),onChange:s,className:E("Selector",y),classNamePrefix:"Selector",isClearable:!1,isSearchable:!1,components:{DropdownIndicator:({innerRef:c,innerProps:m})=>n.jsx("div",{ref:c,...m,className:"Selector__indicator Selector__dropdown-indicator",children:n.jsx("img",{src:Va,alt:"dropdown icon"})}),Control:d}})},Sn=()=>{const{switchNetworkAsync:e}=si();return t=>{if(typeof t!="number"&&typeof t!="string")throw new TypeError(`Invalid chainId type: ${t} (${typeof t})`);const i=vt[t].name;e(t).then(()=>{qa(`Network switched to ${i} (${t})`)},a=>{we(a)})}};const oe=({children:e,hasDelay:t=!0,...i})=>n.jsx(_i,{place:"bottom-start",delayShow:t?150:0,delayHide:t?150:0,...i,children:e}),Ka=()=>{const e=G(),t=Sn(),i=St.map(s=>{const{name:r,icon:o,isDisabled:l}=vt[s];return{value:s,label:n.jsxs("div",{className:"flex gap-x-7",children:[n.jsx("img",{src:o,alt:`${r} icon`}),n.jsx("span",{children:r})]}),isCurrent:s===e,isDisabled:l}}),a=i.find(s=>s.isCurrent);return n.jsxs("div",{className:"NetworkSwitcher",children:[n.jsx(Pe,{options:i,value:a,onChange:s=>{t(s.value)},isDisabled:!0}),n.jsx(oe,{anchorSelect:".NetworkSwitcher .Selector__option--is-disabled",content:"Coming soon"})]})},Ya=()=>{const{isConnected:e}=K();return n.jsxs("div",{className:"CryptoGateway",children:[e&&n.jsx(Ka,{}),n.jsx(Ga,{})]})},za=()=>{const e=Ye(),t=[{name:"Option Trading",to:"/terminal"},{name:"Legacy",to:"https://old.sharwa.finance/"}];return t.forEach(i=>{e.pathname.startsWith(i.to)&&(i.isActive=!0)}),n.jsxs("header",{className:"Header _container",children:[n.jsx(tn,{}),n.jsx(kt,{links:t}),n.jsx(Ya,{})]})};const Za=()=>{const e=gi({enter:"jellyIn",exit:"jellyOut"});return n.jsx(hi,{limit:2,transition:e,position:"bottom-right",hideProgressBar:!0,newestOnTop:!1,closeOnClick:!1,draggable:!1})};const Xa=300,Qa=e=>{const t=Ai();b.useEffect(()=>{const i=window.innerWidth>1025?t:0;e?(document.body.style.overflow="hidden",document.body.style.paddingRight=`${i}px`):setTimeout(()=>{document.body.style.overflow="unset",document.body.style.paddingRight=0},Xa)},[e,t])};Ct.setAppElement("#root");Ct.defaultStyles={};const Fe=({children:e,className:t,isOpen:i,setIsOpen:a,isObligatory:s,reset:r})=>(Qa(i),b.useEffect(()=>{!i&&r&&r()},[i]),n.jsx(Ct,{className:E(t,"App-box"),isOpen:i,onRequestClose:()=>{s||a(!1)},overlayElement:(o,l)=>n.jsxs("div",{...o,children:[l,!s&&n.jsx("button",{className:"ReactModal__Close-btn"})]}),closeTimeoutMS:300,children:e})),Ja=e=>{const{chainId:t}=e,[i]=b.useState(!0),a=Sn();return n.jsxs(Fe,{className:"UnsupportedChainErrorModal",isOpen:i,isObligatory:!0,children:[n.jsxs("div",{className:"UnsupportedChainErrorModal__text text-inline",children:["Chain ",t," is not supported."]}),n.jsx("div",{className:"UnsupportedChainErrorModal__switch-btns",children:St.map(s=>{const r=vt[s],{name:o,icon:l,isDisabled:p}=r;return n.jsxs(ce,{isDisabled:p,type:"stroke",onClick:()=>{a(s)},children:[n.jsx("img",{src:l,alt:`${o} icon`}),"Switch to ",o]},s)})})]})},es="AEZAKMI=",ts=()=>{const[e,t]=b.useState(),i=Ye(),a=r=>{t(r),console.log("GOD EYE MODE ENABLED:",r)},s=r=>{t(null),console.log(`GOD EYE MODE DISABLED${r?` (${r})`:""}`)};return b.useEffect(()=>{const r=i.pathname.split("/"),o=r[r.length-1];if(o.startsWith(es)){const l=o.split("=")[1];ci(l)?a(l):s("Invalid wallet address")}},[i.pathname]),{godEyeAddress:e}},ns=({children:e})=>{const{godEyeAddress:t}=ts();return n.jsx(Cn.Provider,{value:t,children:e})},is="/terminal/builder",vn="0x683Ad8b899Cd14d8e077c9A623E8B3fEd65a8c09",tt=600;const as="/assets/graph-b6757e0e.svg";const te=({className:e,children:t,isSmall:i=!0,symbol:a="USDC",isHlight:s,style:r})=>{const o=G(),l=he(o,a).icon,p=t,d=E(s&&"hlight",e);return n.jsxs("div",{className:E("Currency",d),style:r,children:[n.jsx("img",{src:l,alt:`${a} icon`,width:i?15:"auto"}),n.jsx("span",{children:p})]})},wn=b.createContext(null),Ne=()=>b.useContext(wn),ss=()=>{const e=Ne();return n.jsxs("div",{className:"TokenPricesPanel",children:[n.jsx("div",{className:"TokenPricesPanel__icon",children:n.jsx("img",{src:as,alt:"Graph icon"})}),n.jsx("div",{className:"TokenPricesPanel__items",children:At.map(t=>{if(!e)return null;const i=e[t],a=W(i,void 0,void 0,!0);return n.jsx("div",{className:"TokenPricesPanel__item",children:n.jsx(te,{isHlight:!0,symbol:t,children:n.jsxs("span",{children:["$",a]})})},t)})})]})},rs=()=>{const e=Ye(),t=[{name:"Option Strategies",to:"/terminal/builder"}];return t.forEach(i=>{e.pathname.endsWith(i.to)&&(i.isActive=!0)}),n.jsxs("div",{className:"Terminal",children:[n.jsx(ss,{}),n.jsx(kt,{links:t,type:"border"}),n.jsx(ki,{})]})};function nt(e,t={maxValue:void 0,placeholder:"",isDisabled:!1,isFocused:!1},i=[Me,pe]){const[a,s]=e,{maxValue:r,placeholder:o,isDisabled:l,isFocused:p}=t,[d,u]=i,[y,c]=b.useState(!1),m=b.useRef(null);return{node:n.jsx("input",{autoFocus:p,type:"text",ref:m,value:a,disabled:l,placeholder:o,onChange:g=>{r&&u(g.target.value)>r?s(d(r)):s(d(g.target.value))},onFocus:()=>{c(!0)},onBlur:()=>{c(!1)}}),hasFocus:y,ref:m}}const os=e=>{const{value:t,setValue:i,maxValue:a,formatInputStringFns:s,hasError:r,isDisabled:o,unitStr:l,placeholder:p}=e,d=nt([t,i],{maxValue:a,placeholder:p,isDisabled:o},s),u=E(e.className,d.hasFocus&&"hlight",r&&"error",o&&"disabled");return n.jsxs("div",{className:E("InputFamily Input",u),onClick:()=>{d.ref.current.focus()},children:[d.node,n.jsx("div",{className:"Input__unit",children:l})]})},ge="#46956A",J="#C75E4B",Kt="#D99445",mt="#6988FF",Re="#747FA6",dt="#3A4466",ls="≈",ps={positive:"+",negative:"-",neutral:""},X="Limited",re="Unlimited",Se="Bullish",Tt="Bearish",de="Neutral",se={"Long Call":{stats:{outlooks:[Se],profit:re,loss:X,description:"When you believe that the price of the underlying asset will rise."},structure:[1],key:1,color:ge},"Short Call":{stats:{outlooks:[Tt],profit:X,loss:re,description:"When you believe that the price of the underlying asset will fall."},structure:[-1],key:101,color:J},"Covered Call":{stats:{outlooks:[Se],profit:X,loss:re,description:"When you believe that the price of the underlying asset will rise."},structure:[-1],key:201,color:J},"Long Put":{stats:{outlooks:[Tt],profit:re,loss:X,description:"When you believe that the price of the underlying asset fall."},structure:[2],key:2,color:ge},"Short Put":{stats:{outlooks:[Se],profit:X,loss:re,description:"When you believe that the price of the underlying asset will rise."},structure:[-2],key:102,color:J},"Long Strangle":{stats:{outlooks:[de],profit:re,loss:X,description:"When you believe that the price of the underlying asset will rise or fall."},structure:[1,2],key:3,color:Kt},"Short Strangle":{stats:{outlooks:[de],profit:X,loss:re,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[-1,-2],key:103,color:J},"Covered Strangle":{stats:{outlooks:[de,Se],profit:X,loss:re,description:"When you believe that the price of the underlying asset is at or above the strike price of the short call at expiration."},structure:[-1,-2],key:203,color:J},"Long Straddle":{stats:{outlooks:[de],profit:re,loss:X,description:"When you believe that the price of the underlying asset changes when the direction of the change could be either up or down."},structure:[1,2],key:4,color:Kt},"Short Straddle":{stats:{outlooks:[de],profit:X,loss:re,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[-1,-2],key:104,color:J},"Covered Straddle":{stats:{outlooks:[de,Se],profit:X,loss:re,description:"When you believe that the price of the underlying asset is at or above the strike price of the short call at expiration."},structure:[-1,-2],key:204,color:J},"Iron Butterfly":{stats:{outlooks:[de],profit:X,loss:X,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[2,-2,-1,1],key:5,color:mt,plural:"Iron Butterflies"},"Iron Condor":{stats:{outlooks:[de],profit:X,loss:X,description:"When you believe that the price of the underlying asset won’t rise or fall significantly."},structure:[2,-2,-1,1],key:6,color:mt},"Bull Call Spread":{color:ge},"Bear Put Spread":{color:J}},us={[Se]:ge,[de]:mt,[Tt]:J},Pn=Object.keys(se).filter(e=>se[e].key),ds={Lyra_ETH:0,Lyra_BTC:1,Hegic:2},ft=.003,Yt=.005,An={PARENT_COMPLEX:"parent_complex",PARENT_SIMPLE:"parent_simple",CHILD:"child"},ys=e=>{const{amountStrState:t,strategy:i}=e,[a,s]=t,r=se[i].plural??`${i}s`;return n.jsxs("div",{className:"BuilderForm__field BuilderForm__field_amount",children:[n.jsx("div",{className:"BuilderForm__field-header",children:"Enter Amount"}),n.jsx("div",{className:"BuilderForm__field-body",children:n.jsx(os,{value:a,setValue:s,unitStr:r})})]})},cs=e=>{const{assetState:t,isDisabled:i}=e,[a,s]=t,r=At.map(o=>({value:o,label:n.jsx(te,{symbol:o,isHlight:!0,children:o})}));return n.jsxs("div",{className:"BuilderForm__field BuilderForm__field_asset",children:[n.jsx("div",{className:"BuilderForm__field-header",children:"Asset"}),n.jsx("div",{className:"BuilderForm__field-body",children:n.jsx(Pe,{options:r,defaultValue:a,isDisabled:i,onChange:o=>{s(o.value)}})})]})},ms="/assets/strategy-selector-icon-1e15875d.svg",Ts=e=>{const{strategyState:t,isDisabled:i}=e,[a,s]=t,r=Pn.map(o=>({value:o,label:o}));return n.jsxs("div",{className:"BuilderForm__field BuilderForm__field_strategy",children:[n.jsxs("div",{className:"BuilderForm__field-header",children:["Strategy",n.jsx("div",{className:"BuilderForm__field-tip tip","data-tooltip-id":"BuilderForm_WhenPurchaseTooltip",children:"When purchase"})]}),n.jsx("div",{className:"BuilderForm__field-body",children:n.jsx(Pe,{options:r,defaultValue:a,onChange:o=>{s(o.value)},iconNode:n.jsx("img",{src:ms,alt:"Strategy selector icon"}),className:"Selector_thin-options",isDisabled:i})})]})};const fe=e=>{const{style:t,hasLeftMargin:i}=e;return n.jsx("div",{className:"Spinner",children:n.jsx(Di,{className:"Spinner__icon",style:{marginLeft:i?7:0,...t}})})},it=(e,t,i=n.jsx(fe,{}))=>t?i:e,Mt=(e,t,i=n.jsx(fe,{}))=>t?i:e(),ae=(e="—",t,i)=>n.jsx("span",{className:E("muted",i&&"muted_light"),style:{fontSize:t?13:"inherit"},children:e}),Bn=e=>e.charAt(0).toUpperCase()+e.slice(1),It=(e,t,i=1)=>{const a=e,s=t;if(a>s)return i;if(a==s)return 0;if(a<s)return-i},jt=e=>e.filter((i,a)=>e.indexOf(i)===a),fs=e=>{e.splice(0,e.length)},at=(e,t,i=[],a,s,r)=>(s&&s(!0),t(...i).then(o=>{console.log("Submitting:",o),o.wait().then(l=>{Wa(e,a,o.hash),s&&s(!1),r&&r(l)},l=>{we(l,s)})},o=>{we(o,s)})),bs=(e,t,i,a,s,r)=>{const o=Ce(a,t.decimals),l=new z(...Z(e,t.symbol),xe());at(e,l.approve,[i,Y.from(o)],`${t.symbol} approved.`,s,r)},hs=async(e,t,i,a,s)=>{le(s);const r=new z(...Z(e,t.symbol),ne(e)),o=Ce(s,t.decimals);return(await r.allowance(i,a)).toBigInt()>=o},Ot=(e,t)=>{const i=Bt[t];return Ce(e,i)},gs=(e,t)=>{const i=Bt[t];return ye(e,i)},xs=e=>e.startsWith("W"),Dn=(e,t)=>{const i=e.address!==t.address,a=e.isETH!==t.isETH;return i||a},st=e=>Math.abs(e)===1,Ae=e=>e>0,Ft=e=>!!e.find(t=>!Ae(t)),Cs=e=>!!e.find(t=>Ae(t)),_s=e=>!!e.find(t=>t),ks=e=>{const[,t]=e.split("_");return Number(t)},Ss=(e,t,i)=>{let a;const s=`W${i}`,r=t.split(" ")[0];return!st(e)||r==="Short"?a=["USDC.e"]:r==="Covered"?a=[s]:r==="Iron"&&(a=["USDC.e",s]),a},vs=e=>{const t=e.includes("Straddle"),i=e==="Iron Butterfly";if(t)return[0,1];if(i)return[1,2]},ws=(e,t)=>{if(!(e!=null&&e[0].market))return;if(e.length>1){const a=e.find(s=>s.market===t);if(a)return a}return e[0]},En=(e,t)=>new z(...Z(e,`TxBuilderOpen_${t}`),ne(e)),Ps=e=>{const t=new z(...Z(e,"TxBuilderOpen_Hegic"),ne(e)),i=new z(...Z(e,"TxBuilderOpen_Lyra_BTC"),ne(e)),a=new z(...Z(e,"TxBuilderOpen_Lyra_ETH"),ne(e));return{Hegic:t,Lyra_ETH:a,Lyra_BTC:i}},As=(e,t,i)=>{if(!t)return i;let a=0,s=0;return e.map(o=>Ae(o)?t[a++]:i[s++])},Bs=e=>{const t=Object.keys(e);return t?!!t.find(a=>!e[a][0].isAbsent):!1},Nt=(e,t)=>{var a;return(a=e==null?void 0:e.decomposition)!=null&&a.length?!!e.decomposition.find(s=>{if(!s)return;const r=s.marketToken,o=t??e.paymentToken;return!r||!o?!1:Dn(r,o)}):!1},Ds="/assets/Hegic-a7e6545a.svg",Es="/assets/Hegic_circled-26df614a.svg",Ms="/assets/Hegic_circled-light-9256df54.svg",Is="/assets/Lyra-0ebc1db3.svg",js="/assets/Lyra_circled-1da5fd25.svg",Os="/assets/Lyra_circled-light-a90bfa71.svg",Mn={Hegic:{common:Ds,circled:Es,circledLight:Ms},Lyra:{common:Is,circled:js,circledLight:Os}},Ue=.0015,Fs=.02,bt=["delta","vega","gamma","theta"],zt=8,Ns=[7,14,30,60,90],Ve=Ns.map(an),In=1e4,jn=.005*10**5,Lt=(e,t,i,a)=>{const s=Vt(e,t),r=Vt(e,i),o=Ce(a,s.decimals);if(t===i||o===0n||s.isStable&&r.isStable)return new Promise(u=>{u(a)});const l=Y.from(o);return new z(...Z(e,"Uniswap_Quoter"),xe()).callStatic.quoteExactInput(_t.solidityPack(["address","uint24","address"],[t,jn,i]),l).then(u=>{const y=u.toBigInt();return ye(y,r.decimals)}).catch(u=>{console.log(`Swapping ${s.symbol} to ${r.symbol} error!

`,u)})},rt=(e,t,i)=>{const a=rn(e);return Lt(e,t,a,i)},Ls=(e,t,i)=>{const a=rn(e);return Lt(e,a,t,i)},Rs=(e,t)=>_t.solidityPack(["address","uint24","address"],[e,jn,t]),On=(e,t,i,a)=>{const[s,r]=i.split(".");let o=e[s],l=t[s];return r&&(o=o&&o[r],l=l&&l[r]),It(o,l,a)},ot=(e,t,i)=>{if(!e||!Object.keys(e).length)return{...t};if(!t)return;const a={...e};i||(i=Object.keys(e));for(let s=0;s<i.length;s++){const[r,o]=i[s].split("."),l=o?e[r][o]:e[r],p=o?t[r][o]:t[r],d=l+p;o?(a[r]||(a[r]={}),a[r][o]=d):a[r]=d}return a},Us=(e,t,i)=>e?i>t:i<t,Hs=(e,t,i)=>e?t<i?1:0:t>i?-1:0,$s=(e,t)=>e?Number(t)<100?1:0:Number(t)>100?-1:0,Ws=()=>Ve.map((t,i)=>{const a=new Date(Date.now()+t),s=i===0,r=i===Ve.length-1,o=a.getUTCHours()>=zt,l=a.getUTCDate();return s&&o&&a.setUTCDate(l+1),r&&!o&&a.setUTCDate(l-1),a.setUTCHours(zt),a.setUTCMinutes(0),a.setUTCSeconds(0),a.setUTCMilliseconds(0),a.getTime()}),Rt=(e,t)=>hn(e,1+t),lt=(e,t)=>Ra(e+t,ve(t))*100n,Fn=(e,t,i)=>{if(!t)return null;t=be(t);const{isBase:a,liquidationPrice:s,max:r,min:o}=t,l=`W${i}`,p=he(e,a?l:"USDC.e");return rt(e,p.address,t.amount??0n).then(d=>({inMarketToken:t.amount,marketToken:p,inUSDC:d,isBase:a,liquidationPrice:s,min:o,max:r}))},Nn=(e,t)=>{const i=ot(e,t);for(const a in i){const s=i[a];i[a]=Dt(s,3)}return i};const qs=e=>{const{strategyStructure:t,dateListState:i,chosenDateState:a,lyraMarket:s,updateTriggers:r,resetTriggers:o,isDisabled:l,updateUnstableField:p}=e,[d,u]=i,[y,c]=b.useState(!1),[m,g]=a,{account:f}=K(),T=()=>{c(!0);let P=Ws();if(s){const j=s.liveBoards().map(R=>R.expiryTimestamp*Te),I=[...P,...j];P=jt(I).sort(It)}(s||s===null)&&(u(P),c(!1))},C=()=>{g(null)};b.useEffect(()=>{T()},r),b.useEffect(()=>{C()},o),b.useEffect(()=>{f&&d.length&&!m&&g(d[0])},[f,d]);const h=(P,j="d MMM")=>{const I=P-Date.now();return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"BuilderForm__date-value",children:en(P,j)}),n.jsx("div",{className:"BuilderForm__date-period",children:da(I)})]})},S=d.map(P=>({value:P,label:h(P)})),M=m&&S.find(P=>P.value===m);return n.jsxs("div",{className:"BuilderForm__field BuilderForm__field_date",children:[n.jsx("div",{className:"BuilderForm__field-header",children:"Expiration Date"}),n.jsx("div",{className:"BuilderForm__field-body",children:t.map((P,j)=>{const I=Ae(P),R=st(P),L=it(n.jsx(Pe,{className:"Selector_thin-options",placeholder:"Choose Date",isDisabled:l||!f,options:S,value:M,formatOptionLabel:({value:O},{selectValue:v,context:F})=>{var x;if(F==="menu")return h(O);const B=((x=v[0])==null?void 0:x.value)===O?"d MMM hh a":"d MMM";return h(O,B)},onChange:O=>{g(O.value)},iconTextNode:n.jsxs("span",{className:E({positive:I,negative:!I},"block"),style:{width:25},children:[I?"Buy":"Sell",n.jsx("br",{}),R?"Call":"Put"]})},j),y,n.jsx(fe,{},j));return p(j,L),L})})]})};const pt=({strikeData:e,priceNode:t,isPriceHlight:i})=>{const{market:a,isCall:s,isBuy:r}=e,o=Mn[a].circled;return n.jsxs("div",{className:"StrikeBrief",children:[n.jsx("div",{className:"StrikeBrief__icon",children:n.jsx("img",{src:o,alt:`${a}`})}),n.jsxs("div",{className:E("StrikeBrief__info-card",{positive:r,negative:!r}),children:[r?"Buy":"Sell"," ",s?"Call":"Put"]}),n.jsx("div",{className:E("StrikeBrief__price",i&&"hlight"),children:t})]})};function Zt(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}function Gs(){const[e,t]=b.useState(Zt());return b.useEffect(()=>{function i(){t(Zt())}return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),e}const ut=(e=768)=>{const{width:t}=Gs();return t<e},Vs=({getParentNode:e,getChildNodes:t})=>{const[i,a]=Bi(!1),s=E(i&&"expanded"),r=e(s,a),o=t(s);return n.jsxs(n.Fragment,{children:[r,...o]})};const Ln=({children:e,transitionTimeout:t=250,renderHeader:i=({state:a})=>a.isEnter?"Hide":"Show"})=>n.jsx("div",{className:"Accordion",children:n.jsx(Ei,{transition:!0,transitionTimeout:t,children:n.jsx(Mi,{header:i,children:e})})});const Ie=({isVertical:e})=>n.jsx("div",{className:E("Divider",e&&"vertical")});class Rn{constructor(t){const{titleData:i,itemsData:a}=t,s=Object.keys(i);this.titleData=i,this.itemsData=a,this.dataKeys=s}}class Ks extends Rn{constructor(t){super(t),this.getTitleRow=this.getTitleRow.bind(this),this.getItemsRows=this.getItemsRows.bind(this)}getTitleRow(){const t=this._getCells(this.titleData,!0);return n.jsxs("tr",{children:[...t]})}getItemsRows(){const t=this.itemsData.map(i=>{const a=this._getItemRow(i);return n.jsx(Ee.Fragment,{children:a},i.id)});return n.jsx(Ee.Fragment,{children:t},"rows")}_getCells(t,i){return this.dataKeys.map(a=>{const s=t[a]??ae();return i?n.jsx("th",{children:s},a):n.jsx("td",{children:s},a)})}_getItemRow(t){const i=!!t.children,a=this._getCells(t),s=(o,l)=>n.jsxs("tr",{className:E("Table__item",i&&"expandable",o),onClick:l,children:[...a]});return i?this._getExpandableRow(t,s):s()}_getExpandableRow(t,i){const a=s=>t.children.map(o=>{const l=this._getCells(o);return n.jsxs("tr",{className:E("Table__child-item",s),children:[...l]},o.id)});return n.jsx(Vs,{getParentNode:i,getChildNodes:a},t.id)}}class Ys extends Rn{constructor(t){super(t),this._getItem=this._getItem.bind(this)}getItems(){return this.itemsData.map(this._getItem)}_renderItemRows(t){const i=t.omittedKeys;return this.dataKeys.map(s=>{const r=t[s];return i&&!!i.find(l=>s===l)||ee(r)?null:n.jsxs("div",{className:E("Table__item-row info-row",s),children:[n.jsx("div",{className:"info-row__title",children:this.titleData[s]}),n.jsx("div",{className:"info-row__value",children:r})]})})}_getItem(t){return n.jsxs("div",{className:"Table__item App-box",children:[this._renderItemRows(t),t.children&&n.jsxs(n.Fragment,{children:[n.jsx(Ie,{}),n.jsx(Ln,{transitionTimeout:500,renderHeader:({state:i})=>`${i.isEnter?"Hide":"Show"} full strategy`,children:t.children.map(i=>n.jsxs(n.Fragment,{children:[n.jsx(Ie,{}),n.jsx("div",{className:"Table__child-item",children:this._renderItemRows(i)})]}))})]})]})}}const Un=({structureData:e,className:t,children:i})=>{const a=ut(576),s=l=>{if(!l){const p=new Ks(e),{getTitleRow:d,getItemsRows:u}=p;l=[n.jsx("thead",{children:d()},"head"),n.jsx("tbody",{children:u()},"body")]}return n.jsx("div",{className:"Table__desktop",children:n.jsx("table",{children:l})})},r=()=>{const p=new Ys(e).getItems();return n.jsx("div",{className:"Table__mobile",children:p})},o=()=>a?r():s();return n.jsx("div",{className:E("Table",t),children:i!=null&&i.length?s(i):o()})};const zs=e=>{const{id:t,amountStr:i,strikeMarketsDataArr:a,chosenStrikeData:s,setChosenStrikeData:r,isOpen:o,close:l}=e,[p,d]=b.useState([]),u=()=>{a.forEach((T,C)=>{const h=$(pe(i));T.utils.calcPremium(h).then(S=>{p[C]=S,d([...p])})})};if(b.useEffect(()=>{d([]),a&&u()},[a,i]),!a)return null;const y=23,m=80-y,f=180-y;return n.jsx("div",{className:E("StrikeInfoBox",o&&"open"),style:{zIndex:9-t*2},children:n.jsxs(Un,{onClick:T=>T.stopPropagation(),children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:n.jsx("div",{style:{width:f},children:"Market"})}),n.jsx("th",{children:n.jsx("div",{style:{width:m},children:"Source"})}),n.jsx("th",{children:n.jsx("div",{style:{width:m},children:"Delta"})}),n.jsx("th",{children:n.jsx("div",{style:{width:m},children:"Vega"})}),n.jsx("th",{children:n.jsx("div",{style:{width:m},children:"Gamma"})}),n.jsx("th",{children:n.jsx("div",{style:{width:m},children:"Theta"})}),n.jsx("th",{children:n.jsx("div",{style:{width:m},children:"Rho"})})]})}),n.jsx("tbody",{children:a.map((T,C)=>{const{greeks:h}=T,S=p[C],M=!S||S.isDisabled,P=T===s;return n.jsxs("tr",{className:E("StrikeInfoBox__strike-option",M&&"disabled",P&&"chosen"),children:[n.jsxs("td",{children:[n.jsx("button",{className:"StrikeInfoBox__strike-option-overlay-btn",onClick:()=>{r(T),l()},disabled:M}),n.jsx(pt,{strikeData:T,priceNode:Mt(()=>S===null?ae("No liquidity",!0):`$${W(S.inUSDC)}`,ee(S)),isPriceHlight:!0})]}),n.jsx("td",{children:"AMM"}),n.jsx("td",{children:h.delta}),n.jsx("td",{children:h.vega}),n.jsx("td",{children:h.gamma}),n.jsx("td",{children:h.theta}),n.jsx("td",{children:h.rho})]},T.market)})})]})})};const Ke=e=>{const{children:t}=e;return n.jsx("div",{className:"InnerWarning",children:t})};Ii();const Zs=e=>{const{id:t,className:i,isUnited:a,spaceBetween:s,isDraggable:r,breakpoints:o,handleInit:l,slideClassName:p,children:d}=e,u=b.useRef(null),y=`${a?`.${i}`:`#${t}`}`,c={spaceBetween:s,allowTouchMove:r,breakpoints:o,navigation:{enabled:!0,prevEl:`${y} .Carousel__nav-btn_prev`,nextEl:`${y} .Carousel__nav-btn_next`},on:{init:m=>{m.el.style.overflow="clip visible",l&&l(m)}}};return b.useEffect(()=>{const m=u.current;m&&(Object.assign(m,c),m.initialize())},[u,c]),n.jsxs("div",{className:E("Carousel",i),id:t,children:[n.jsx("button",{className:"Carousel__nav-btn Carousel__nav-btn_prev"}),n.jsx("swiper-container",{init:!1,ref:u,children:d==null?void 0:d.map((m,g)=>n.jsx("swiper-slide",{class:p,children:m},g))}),n.jsx("button",{className:"Carousel__nav-btn Carousel__nav-btn_next"})]})};const Xs=e=>{const{asset:t}=e;return n.jsx(Zs,{slidesPerView:"auto",breakpoints:{768:{slidesPerView:"auto"},576:{slidesPerView:7,grid:{fill:"row",rows:2}},520:{slidesPerView:6,grid:{fill:"row",rows:2}},380:{slidesPerView:5,grid:{fill:"row",rows:2}},0:{slidesPerView:4,spaceBetween:4,grid:{fill:"row",rows:2}}},spaceBetween:5,className:"StrikeCarousel",isDraggable:!1,isUnited:!0,slideClassName:`StrikeCarousel__slide_${t}`,children:e.children})},Ut=e=>Object.keys(e).map(Number),Qs=e=>{const t={},i=Object.keys(e).map(ks),a=jt(i),s=Object.values(e);return a.forEach(r=>{const o=s.filter(l=>l.strike===r);t[r]=o}),t},Js=e=>e.map(Qs),er=e=>{const t=[];return e.forEach(a=>{const s=Ut(a);t.push(...s)}),jt(t)},tr=e=>{const t=er(e);return e.map(a=>{const s=Ut(a),r={...a};return t.forEach(o=>{s.indexOf(o)===-1&&(r[o]=[{strike:o,isAbsent:!0,isDummy:!0}])}),r})};const nr=e=>{const{currentPrice:t,isFirst:i}=e;return n.jsx("div",{className:E("StrikeCurrentPriceItem","StrikeChooser__item",i&&"StrikeCurrentPriceItem_first"),children:n.jsxs("span",{children:["$",ie(t)]})})};const ir="/assets/cross_grey-42dbd9c5.svg",ar=e=>{const{isITM:t}=e;return n.jsx("div",{className:E("StrikeAbsentItem","StrikeChooser__item",t&&"StrikeChooser__item_ITM"),children:n.jsx("img",{src:ir,alt:"Absent"})})},Ht=e=>{const t=Ne();return(t==null?void 0:t[e])??0n},sr=({className:e,id:t,isAutoSelectEnabled:i,structureKey:a,asset:s,amountStr:r,strikesData:o,chosenStrikeData:l,setChosenStrikeData:p})=>{const{isConnected:d}=K(),u=Ht(s),y=Math.floor(H(u)),c=t===0,m=ut(),[g,f]=b.useState(null);b.useEffect(()=>{if(i&&o&&!l){const v=Object.values(o).find(_=>!_[0].isDummy);if(!v)return;const F=v[0];p(F)}},[o]);const T=v=>{const F={};for(const _ in v){const x=v[_][0],{isCurrentPrice:w,isDummy:k}=x;w&&k||(F[_]=v[_])}return F},C=()=>{const v=T(o);let F;for(const _ in o){const B=o[_][0];if(B.isCurrentPrice||y===B.strike){B.isCurrentPrice=!0,F=B;break}}return F||(v[y]=[{strike:y,isCurrentPrice:!0,isDummy:!0}]),v},h=()=>{if(o){if(!Bs(o))return{strikes:[],dataArr:[]};let v=C();const F=Ut(v).sort(It),_=Object.values(v).sort((B,x)=>{const w=B[0],k=x[0];return On(w,k,"strike")});return{strikes:F,dataArr:_}}return{}},{strikes:S,dataArr:M}=h(),P=!!(S!=null&&S.length),{openPopup:j,closePopup:I,isOpen:R}=nn(()=>f(null)),L=()=>n.jsx(Xs,{asset:s,children:S.map((v,F)=>{const _=M[F],B=_[0],{isCurrentPrice:x,isAbsent:w,isDummy:k}=B;if(x&&k)return n.jsx(nr,{currentPrice:v,isFirst:c},"current_price");const A=st(a),D=Us(A,v,y);if(w)return n.jsx(ar,{isITM:D},F);const N=l&&l.strike===v,U=N&&l.market,V=g===_;return n.jsxs(ce,{className:E("StrikeChooser__item",D&&"StrikeChooser__item_ITM",N&&"chosen",V&&"open",x&&E("StrikeCurrentPriceItem",c&&"StrikeCurrentPriceItem_first")),style:{cursor:"pointer"},type:"stroke",onClick:ue=>{R&&ue.stopPropagation(),f(_),j()},children:[N&&n.jsx("div",{className:"StrikeChooser__item-market",children:n.jsx("img",{src:Mn[U].circledLight,alt:`${U} icon`})}),n.jsxs("span",{children:["$",ie(v)]})]},v)})}),O=()=>o?P?n.jsx("div",{className:"StrikeChooser__items",style:{zIndex:10-t*2},children:L()}):n.jsx(Ke,{children:"No Liquidity"}):n.jsxs(Ke,{children:[d?"C":"Connect wallet and c","hoose expiration date to view strikes"]});return n.jsxs("div",{className:E("StrikeChooser",e,m&&!o&&"hidden"),children:[O(),n.jsx(zs,{id:t,amountStr:r,strikeMarketsDataArr:g,chosenStrikeData:l,setChosenStrikeData:p,isOpen:R,close:I})]})},Hn="Hegic_",rr="USDC.e",or=(e,t,i)=>{const[a,,s]=e.split("_");return!(a.includes("SPREAD")||i!==(a==="CALL")||s!==t)},lr=async(e,t,i)=>{const{asset:a,amount:s,period:r}=i;let o;const l=new z(t,ln(e,"Hegic_Strategy"),ne(e)),p=Xe(r);try{const d=(await l.getAvailableContracts(p,[])).toBigInt(),u=Bt[a],y=$(s,u);o=d>=y}catch{}return o},pr=async(e,t,i,a)=>{const{asset:s,period:r}=i,o=Ot(a,s),l=Aa(e,t),p=Xe(r);return l.calculatePremium(p,o,0).then(d=>{const u=ye(d.toBigInt(),yt),y=he(e,rr);return rt(e,y.address,u).then(c=>({inUSDC:c,inMarketToken:u,marketToken:y}))})},ur=(e,t)=>{const i=H(t);return Math.floor(i*(e/100))},dr=(e,t,i)=>{const{protocolName:a,isCall:s,assetPrice:r}=i,{strategyKey:o}=t,[,l]=o.split("_"),p=ur(l,r),d=cr(e,t,i),u=$s(s,l);return{market:"Hegic",protocolName:a,strike:p,isCurrentPrice:l==="100",isCall:s,isBuy:!0,greeks:{delta:u,vega:0,gamma:0,theta:0,rho:0},utils:d}},yr=(e,t)=>{const i=$(e,Q);return t.utils.calcPremium(i)},cr=(e,t,i)=>{const{strategyKey:a,strategyAddress:s}=t,{asset:r,protocolName:o,period:l}=i;return{calcPremium:async u=>pr(e,a,i,u),getBuilderParams:async(u,y,c)=>{u=Ot(u,r);const m=Y.from(u),g=y.premiumInMarketToken,f=gn(g,c),T=Y.from(f);return En(e,o).encodeFromHegic(s,m,Xe(l),T,[])}}},mr=async(e,t,i)=>{const{asset:a,amount:s,isCall:r}=i,o={},l={},p=Object.keys(t);for(let d=0;d<p.length;d++){const u=p[d],y=t[u],c={strategyKey:u,strategyAddress:y};if(!or(u,a,r)||!await lr(e,y,i))continue;const m=dr(e,c,i),g=yr(s,m),{strike:f}=m;l[f]=g,o[`${Hn}${f}`]={...m}}return{strikesData:o,premiumPromisesData:l}},Tr=async(e,t)=>{const i=Object.keys(t),a=Object.values(t);await Promise.all(a).then(s=>{s.forEach((r,o)=>{if(r){const l=i[o];e[`${Hn}${l}`].premiumData=r}})})},fr=e=>{const t={};for(const i in e){const a=e[i];a.premiumData&&(t[i]=a)}return t},br=async(e,t,i)=>{const{strikesData:a,premiumPromisesData:s}=await mr(e,t,i);return await Tr(a,s),a},hr=async(e,t)=>{const{expiry:i}=t,a=i-Date.now();t.protocolName="Hegic",t.period=a;const s=Sa(e,a);return s?fr(await br(e,s,t)):{}},ht="Lyra_",gr="USDC.e",xr=["NotEnoughCollateral","TooMuchCollateral","EmptyCollateral","InsufficientQuoteBalance","InsufficientQuoteAllowance","InsufficientBaseBalance","InsufficientBaseAllowance","IncorrectOwner"],Cr=e=>{const t=xr.find(i=>i===e);if(!e||t)return!0},_r=(e,t)=>{var s;const i=(s=e.liveBoards().find(r=>r.expiryTimestamp===Xe(t)))==null?void 0:s.id;return i?e.liveBoardsMap[i]:void 0},kr=(e,t)=>!(!e||!Cr(t.disabledReason)),Sr=(e,t,i)=>{const a=(d,u=18)=>_t.parseUnits(d.toFixed(u).toString(),u),s=Y.from(10).pow(18),r=2.5,o=i?e.strikePrice:e.strike().strikePrice,l=(e.newSize??e.size).mul(o).div(s).mul(a(r)).div(s);return t.max?t.max:l.gt(t.min)?l:t.min},vr=(e,t,i,a,s)=>{const{asset:r,protocolName:o,isCall:l,isBuy:p}=a,d=he(e,gr),u=(f,T)=>{const C=Y.from(f);return t.trade(s,i,l,p,C,Ue,T)},y=async(f,T)=>{const C=Ot(f,r);return u(C).then(h=>{const S=p?"maxTotalCost":"minTotalCost",M=h.params[0][S].toBigInt(),P=Rt(M,Fs);return kr(P,h)?rt(e,d.address,P).then(j=>{const I={inUSDC:j,inMarketToken:P,marketToken:d};return T?I:{premiumData:I,greeks:h.greeks}}):null})};return{calcPremium:async f=>y(f,!0),calcPremiumWithGreeks:y,getCollateralData:async(f,T)=>{const C=Y.from(f);return u(C,T).then(h=>{const{collateral:S}=h;S&&!S.max&&(h.collateral.max=Sr(h,S));const M=h.marketName.split("-")[0];return Fn(e,S,M)})},getBuilderParams:async(f,T,C)=>{const h=En(e,o),S=Y.from(f),M=T.premiumInMarketToken,P=gn(M,C),j=Y.from(P);return u(S,T).then(I=>{const R=I.params[0];return h.encodeFromLyra([R.strikeId,R.positionId,R.iterations,R.optionType,R.amount,R.setCollateralTo,R.minTotalCost,j,vn])})}}},wr=(e,t,i,a,s)=>{const{protocolName:r,isCall:o,isBuy:l}=a,{strikeId:p,strikePrice:d}=i,u=p.toNumber(),y=H(d.toBigInt()),c=vr(e,t,u,a,s);return{market:"Lyra",protocolName:r,strike:y,isCall:o,isBuy:l,utils:c}},Pr=(e,t)=>{const i=$(e,Q);return t.utils.calcPremiumWithGreeks(i)},Ar=(e,t,i,a,s)=>{const{amount:r}=i,o={},l={};return a.strikes.forEach(p=>{const d=wr(e,t,p,i,s),u=Pr(r,d),{strike:y}=d;l[y]=u,o[`${ht}${y}`]=d}),{strikesData:o,premiumsWithGreeksPromises:l}},Br=async(e,t)=>{const i=Object.keys(t),a=Object.values(t);await Promise.all(a).then(s=>{s.forEach((r,o)=>{if(r){const{premiumData:l,greeks:p}=r;for(const u in p){const y=p[u];p[u]=H(y.toBigInt(),Q,3)}const d=i[o];e[`${ht}${d}`].premiumData=l,e[`${ht}${d}`].greeks=p}})})},Dr=e=>{const t={};for(const i in e){const a=e[i];a.premiumData&&(t[i]=a)}return t},Er=async(e,t,i,a)=>{const{asset:s,expiry:r}=i;i.protocolName=`Lyra_${s}`;const o=_r(t,r);if(!o)return;const{strikesData:l,premiumsWithGreeksPromises:p}=Ar(e,t,i,o,a);return await Br(l,p),Dr(l)},Mr=e=>{const{asset:t,strategy:i,amountStr:a,chosenDate:s,strategyStructure:r,hasSell:o,strikesDataArrState:l,chosenStrikesState:p,areStrikesLoadingState:d,lyraMarket:u,updateTriggers:y,resetTriggers:c,updateUnstableField:m}=e,g=G(),{account:f}=K(),[T,C]=l,[h,S]=p,[M,P]=d,j=Ht(t),I=()=>{P(!0);const O=[];r.forEach((v,F)=>{const _={asset:t,amount:pe(a),expiry:s,isCall:st(v),isBuy:Ae(v),assetPrice:j};T[F]={};const B=x=>{T[F]={...T[F],...x}};_.isBuy&&O.push(hr(g,{..._}).then(B)),u&&O.push(Er(g,u,{..._},f).then(B))}),Promise.all(O).then(()=>{const v=Js(T),F=tr(v);C([...F]),P(!1)})},R=()=>{S([])},L=()=>{C([])};return b.useEffect(()=>{R(),L()},c),b.useEffect(()=>{s&&I()},y),n.jsxs("div",{className:E("BuilderForm__field","BuilderForm__field_strike",!o&&"col-span-2"),children:[n.jsx("div",{className:"BuilderForm__field-header",children:n.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_StrikeTooltip",children:"Strike"})}),n.jsx("div",{className:"BuilderForm__field-body",children:r.map((O,v)=>{const F=vs(i),_=F&&F.indexOf(v)!==-1,B=it(n.jsx(sr,{id:v,isAutoSelectEnabled:r.length===1,structureKey:O,asset:t,amountStr:a,strikesData:T[v],chosenStrikeData:h[v],setChosenStrikeData:x=>{if(h[v]=x,_){const w=x.strike,k=x.market;F.filter(D=>D!==v).forEach(D=>{const N=ws(T[D][w],k);h[D]=N})}S([...h])}},v),M,n.jsx(fe,{},v));return m(v,B),B})})]})};const Ir=e=>{const{liqPrice:t,isLiqPriceLoading:i,isInLastHalf:a}=e,s=n.jsx("span",{className:"muted_light",children:"..."}),r=n.jsx("span",{className:"muted_light",children:"—"}),o=()=>`$${W(t)}`;return n.jsxs("div",{className:E("CollateralLiqPrice",a&&"CollateralLiqPrice_down"),children:["Liq. Price:",n.jsxs("span",{className:"CollateralLiqPrice__val",children:[i&&s,!i&&(t?o():r)]})]})};const jr=({min:e,max:t,collateralData:i,handleClick:a})=>n.jsx("div",{className:"CollateralRangeBtns",children:[e,t].map((s,r)=>{const o=i.isBase,l=ie(H(s)),p=r===0;return n.jsxs(Ee.Fragment,{children:[n.jsxs("button",{onClick:()=>a(l),children:[o?"":"$",l]},r),p?"—":""]},r)})});const Or=({collateralData:e,collateralAmountStr:t,onChange:i})=>{const{isBase:a}=e,s=a?1:0,r=H(e.min,Q,s),o=H(e.max,Q,s),l=pe(t),p=a?.01:1;return n.jsx("div",{className:"CollateralSlider",children:n.jsx(ji,{defaultValue:0,value:l,min:r,max:o,step:p,onChange:i})})},Fr=e=>{const{isInLastHalf:t,getCollateralData:i,collateralData:a,setCollateralData:s,collateralTokens:r,chosenStrike:o,updateTriggers:l,resetTriggers:p}=e,[d,u]=b.useState(""),[y,c]=b.useState(r[0]),[m,g]=b.useState(!1),[f,T]=b.useState(!1),C=()=>{u(""),c(r[0]),s(null)},h=()=>{u(""),s(null)};b.useEffect(()=>{C()},p),b.useEffect(()=>{o&&(g(!0),h(),S(!0))},[o,y]);const S=I=>{let R;if(!I&&d){const L=pe(d);R=$(L)}i(y,R).then(L=>{s(L),g(!1),T(!1)})};ze(()=>{m||(T(!0),S())},tt,[d,...l]);const M=nt([d,u],{placeholder:"0"}),P=r.map(I=>({value:I,label:n.jsx(te,{symbol:I,isHlight:!0,children:I})})),j=E(M.hasFocus&&"hlight");return n.jsx("div",{className:E("CollateralChooser",j),children:o?n.jsxs(n.Fragment,{children:[a&&n.jsx(Ir,{liqPrice:a.liquidationPrice,isLiqPriceLoading:f,isInLastHalf:t}),it(n.jsxs("div",{className:"CollateralChooser__input-container",children:[n.jsx("div",{className:"CollateralChooser__input",children:M.node}),a&&n.jsx(jr,{min:a.min,max:a.max,collateralData:a,handleClick:I=>{u(I)}}),a&&n.jsx(Or,{collateralData:a,collateralAmountStr:d,onChange:I=>{const R=Me(I);u(R)}})]}),m),n.jsx("div",{className:"CollateralChooser__token-selector",children:n.jsx(Pe,{options:P,defaultValue:y,isDisabled:P.length===1,onChange:I=>{c(I.value)}},`CollateralChooser__token-selector_${y}`)})]}):n.jsx(Ke,{children:"Strike required"})})},Nr=e=>{const{asset:t,amountStr:i,strategy:a,strategyStructure:s,hasSell:r,chosenStrikes:o,collateralDataArrState:l,updateTriggers:p,resetTriggers:d,updateUnstableField:u}=e,[y,c]=l,m=()=>{c([])};b.useEffect(()=>{m()},d);const g=(T,C)=>{y[T]=C,c([...y])},f=(T,C,h)=>{const S=o[T];if(!S||!S.utils.getCollateralData)return new Promise(()=>{});const M=$(pe(i)),P=xs(C),j=Y.from(h??0);return S.utils.getCollateralData(M,{isBaseCollateral:P,setToCollateral:j})};return r?n.jsxs("div",{className:"BuilderForm__field BuilderForm__field_collateral",children:[n.jsx("div",{className:"BuilderForm__field-header",children:n.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_CollateralTooltip",children:"Collateral"})}),n.jsx("div",{className:"BuilderForm__field-body",children:s.map((T,C)=>{if(Ae(T))return n.jsx("div",{className:"BuilderForm__field-empty-row",children:ae()},C);const S=o[C],M=Ss(T,a,t),P=C>(s.length-1)/2,j=n.jsx(Fr,{isInLastHalf:P,collateralTokens:M,collateralData:y[C],setCollateralData:I=>g(C,I),getCollateralData:(I,R)=>f(C,I,R),chosenStrike:S,updateTriggers:p,resetTriggers:d},C);return u(C,j),j})})]}):null};const Lr=e=>{const{strategyStructure:t,unstableFields:i,chosenStrikes:a,strikesDataArr:s,areStrikesLoading:r}=e;return ut()?n.jsxs("div",{className:"BuilderMobileContainer BuilderForm__field",children:[n.jsx("div",{className:"BuilderForm__field-header",children:"Expiration Date"}),n.jsx("div",{className:"BuilderForm__field-body",children:t.map((l,p)=>{const d=r||!!s[p],u=!!a[p],y=!!i.collateral[p],c=p===t.length-1;return n.jsxs("div",{className:"BuilderMobileContainer__item",children:[n.jsx("div",{className:E("BuilderMobileContainer__item-date",d&&"mb-7"),children:i.date[p]}),n.jsx("div",{className:"BuilderMobileContainer__item-strike",children:i.strike[p]}),y&&u&&n.jsxs("div",{className:E("BuilderMobileContainer__item-collateral"),children:[n.jsx("div",{className:"BuilderMobileContainer__item-title",children:n.jsx("span",{className:"tip","data-tooltip-id":"BuilderForm_CollateralTooltip",children:"Collateral"})}),i.collateral[p]]}),d&&!c&&n.jsx(Ie,{})]},p)})})]}):null},Rr=e=>{const{assetState:t,strategyState:i,amountStrState:a,dateListState:s,chosenDateState:r,strikesDataArrState:o,chosenStrikesState:l,collateralDataArrState:p}=e,[d]=t,[u]=i,[y]=a,[c]=r,m=se[u].structure,g=Ft(m),f=b.useState(!1),[T]=f,[C]=l,[h]=o,S=G(),M=sn(S),[P,j]=b.useState(void 0),I=()=>{j(void 0);const _=`W${d}`;M.markets().then(B=>{const x=B.find(w=>w.baseToken.symbol===_);j(x??null)})};b.useEffect(()=>{I()},[d]);const R={date:[d,P],strike:[c],collateral:[y]},L={date:[d,u],strike:[d,u,c],collateral:[d,u,c],unstableFields:[u]},[O,v]=b.useState({date:[],strike:[],collateral:[]}),F=(_,B,x)=>{O[_][B]=x};return b.useEffect(()=>{v({date:[],strike:[],collateral:[]})},L.unstableFields),n.jsxs("div",{className:"BuilderForm__fields",children:[n.jsx(cs,{assetState:t,isDisabled:T}),n.jsx(Ts,{strategyState:i,isDisabled:T}),n.jsx(ys,{amountStrState:a,strategy:u}),n.jsx(qs,{strategyStructure:m,dateListState:s,chosenDateState:r,lyraMarket:P,updateTriggers:R.date,resetTriggers:L.date,isDisabled:T,updateUnstableField:(_,B)=>{F("date",_,B)}}),n.jsx(Mr,{asset:d,strategy:u,amountStr:y,chosenDate:c,strategyStructure:m,hasSell:g,strikesDataArrState:o,chosenStrikesState:l,areStrikesLoadingState:f,lyraMarket:P,updateTriggers:R.strike,resetTriggers:L.strike,updateUnstableField:(_,B)=>{F("strike",_,B)}}),n.jsx(Nr,{asset:d,strategy:u,amountStr:y,strategyStructure:m,hasSell:g,chosenStrikes:C,collateralDataArrState:p,updateTriggers:R.collateral,resetTriggers:L.collateral,updateUnstableField:(_,B)=>{F("collateral",_,B)}}),n.jsx(Lr,{strategyStructure:m,unstableFields:O,chosenStrikes:C,strikesDataArr:h,areStrikesLoading:T})]})},Ur=()=>n.jsxs(oe,{id:"BuilderForm_StrikeTooltip",children:[n.jsx("h6",{children:"Hegic Options (American options)"}),n.jsxs("p",{className:"my-5",children:["They require manual exercise before ",n.jsx("br",{}),"the expiration date. ",n.jsx("br",{}),"There are no secondary markets; out-",n.jsx("br",{}),"of-the-money options can't be sold."]}),n.jsx("h6",{children:"Lyra (European options)"}),n.jsxs("p",{className:"my-5",children:["They are only exercised automatically ",n.jsx("br",{}),"at the expiration date. ",n.jsx("br",{}),"Secondary markets are available; out-",n.jsx("br",{}),"of-the-money options can be sold."]})]});const Hr=({strategy:e})=>{const t=se[e],{outlooks:i,profit:a,loss:s,description:r}=t.stats;return n.jsxs(oe,{className:"WhenPurchaseTooltip",id:"BuilderForm_WhenPurchaseTooltip",place:"bottom-end",children:[n.jsxs("div",{className:"WhenPurchaseTooltip__header",children:[n.jsx("h2",{className:"WhenPurchaseTooltip__title",children:e}),n.jsx("div",{className:"WhenPurchaseTooltip__outlooks",children:i.map(o=>{const l=us[o];return n.jsx("div",{className:"WhenPurchaseTooltip__outlook",style:{color:l},children:o},o)})})]}),n.jsxs("div",{className:"WhenPurchaseTooltip__body",children:[n.jsx("h3",{className:"WhenPurchaseTooltip__subtitle",children:"When purchase"}),n.jsx("p",{className:"WhenPurchaseTooltip__description",children:r}),n.jsx("div",{className:"WhenPurchaseTooltip__stats",children:[a,s].map((o,l)=>{const p=l===0?"Profit":"Loss";return n.jsxs("div",{className:"WhenPurchaseTooltip__stats-item",children:[n.jsx("div",{className:"WhenPurchaseTooltip__stats-item-name",children:p}),n.jsx("div",{className:"WhenPurchaseTooltip__stats-item-value",children:o})]},`${p}_${o}`)})})]})]})},$r=()=>n.jsxs(oe,{id:"BuilderForm_CollateralTooltip",children:["This refers to the amount ",n.jsx("br",{}),"you’re setting aside ",n.jsx("br",{}),"as collateral for selling options"]}),Wr=()=>n.jsxs(oe,{id:"BuilderForm_MaxCostTooltip",children:["This is the highest amount ",n.jsx("br",{}),"you’ll pay for buying options. ",n.jsx("br",{}),"If the option price rises ",n.jsx("br",{}),"beyond this, your transaction ",n.jsx("br",{}),"will be reverted."]}),qr=()=>n.jsxs(oe,{id:"BuilderForm_MinReceivedTooltip",children:["This is the least amount you’re ",n.jsx("br",{}),"assured to receive when ",n.jsx("br",{}),"selling options. If the option ",n.jsx("br",{}),"price drops beyond this point, ",n.jsx("br",{}),"your transaction will ",n.jsx("br",{}),"be reverted."]}),Gr=()=>n.jsxs(oe,{id:"BuilderForm_YouPayWarningTooltip",children:["Apparently, the collateral you've set ",n.jsx("br",{}),"is too small. This may result in instant ",n.jsx("br",{}),"liquidation of the position."]}),Vr=()=>n.jsxs(oe,{id:"Builder_PremiumTooltip",children:[n.jsx("h6",{children:"Negative Premium"}),n.jsxs("div",{style:{margin:"3px 0 5px"},children:["Indicates the amount of USDC you ",n.jsx("br",{}),"have paid as an option buyer."]}),n.jsx("h6",{children:"Positive Premium"}),n.jsxs("div",{style:{margin:"3px 0"},children:["Denotes the amount of USDC you ",n.jsx("br",{}),"have received as an option seller."]})]}),Kr=({strategy:e})=>n.jsxs("div",{className:"BuilderTooltips",children:[n.jsx(Ur,{}),n.jsx(Hr,{strategy:e}),n.jsx($r,{}),n.jsx(Vr,{}),n.jsx(Wr,{}),n.jsx(qr,{}),n.jsx(Gr,{})]});const Yr=({collateralCost:e,getCostNode:t})=>n.jsxs("div",{className:"BuilderCalculations__item",children:[n.jsx("div",{className:"BuilderCalculations__item-name tip","data-tooltip-id":"BuilderForm_CollateralTooltip",children:"Collateral"}),n.jsx("div",{className:E("BuilderCalculations__item-value",e&&e.inUSDC!==0n&&"tip"),"data-tooltip-id":"BuilderForm__CollateralCostDecompositionTooltip",children:t(e)})]}),zr=({maxCost:e,getCostNode:t})=>n.jsxs("div",{className:"TradeCostValue",children:[n.jsx("div",{className:"BuilderCalculations__item-name tip","data-tooltip-id":"BuilderForm_MaxCostTooltip",children:"Max. Cost"}),n.jsx("div",{className:E("BuilderCalculations__item-value",e&&"tip"),"data-tooltip-id":"BuilderForm__MaxCostDecompositionTooltip",children:t(e,"-")})]}),Zr=({netCost:e,getCostNode:t})=>{const i=(e==null?void 0:e.inUSDC)<0?"negative":(e==null?void 0:e.inUSDC)>0?"positive":"neutral",a=ps[i];return n.jsxs("div",{className:"TradeCostValue",children:[n.jsx("div",{className:"BuilderCalculations__item-name",children:"Net. Cost"}),n.jsx("div",{className:E("BuilderCalculations__item-value",i),children:t(e,a)})]})},Xr=({minReceived:e,getCostNode:t})=>n.jsxs("div",{className:"TradeCostValue",children:[n.jsx("div",{className:"BuilderCalculations__item-name tip","data-tooltip-id":"BuilderForm_MinReceivedTooltip",children:"Min. Received"}),n.jsx("div",{className:E("BuilderCalculations__item-value",e&&"tip"),"data-tooltip-id":"BuilderForm__MinReceivedDecompositionTooltip",children:t(e,"+")})]});const Qr=({hasBuy:e,hasSell:t,getCostNode:i,maxCost:a,minReceived:s,netCost:r})=>{const o={plus:n.jsx("span",{className:"helper-symbol mx-10 muted_light",style:{fontSize:18},children:"+"}),equal:n.jsx("span",{className:"helper-symbol mx-10 muted_light",style:{fontSize:17},children:"="})},l=e&&t;return n.jsxs("div",{className:"TradeCostItem BuilderCalculations__item",children:[e&&n.jsx(zr,{maxCost:a,getCostNode:i}),l&&o.plus,t&&n.jsx(Xr,{minReceived:s,getCostNode:i}),l&&n.jsxs(n.Fragment,{children:[o.equal,n.jsx(Zr,{netCost:r,getCostNode:i})]})]})},Jr=({hasBuy:e,hasSell:t,hasChosenStrike:i,maxCost:a,minReceived:s,netCost:r,collateralCost:o})=>{const l=(p,d)=>!i||ee(p)||(p==null?void 0:p.inUSDC)===0n?"$0":Mt(()=>`${d??""}$${W(p.inUSDC<0?-p.inUSDC:p.inUSDC)}`,!p);return n.jsxs("div",{className:"BuilderCostItems BuilderCalculations__items",children:[n.jsx(Qr,{hasBuy:e,hasSell:t,getCostNode:l,maxCost:a,minReceived:s,netCost:r}),t&&n.jsx(Yr,{collateralCost:o,getCostNode:l})]})};const $n=({id:e,decompositionArr:t,...i})=>n.jsx(oe,{className:"TooltipDecomposition",id:e,place:"bottom-end",...i,children:t.map((a,s)=>{const r=s===t.length-1;return n.jsxs(Ee.Fragment,{children:[n.jsxs("div",{className:"TooltipDecomposition__item",children:[n.jsx("div",{className:"TooltipDecomposition__item-name",children:a.nameNode}),n.jsx("div",{className:"TooltipDecomposition__item-value",children:a.valueNode})]}),!r&&n.jsx(Ie,{})]},s)})}),eo=({id:e,priceDecompositionArr:t})=>{const a=(()=>t.map(r=>{const o=r.marketToken.isStable,l=n.jsx(te,{symbol:r.marketToken.symbol,isHlight:!0,children:Oe(r.inMarketToken,o)}),p=`$${W(r.inUSDC,2)}`;return{nameNode:l,valueNode:p}}))();return n.jsx($n,{id:e,decompositionArr:a})},to=({maxCost:e,minReceived:t,collateralCost:i})=>{const a=[{id:"BuilderForm__MaxCostDecompositionTooltip",decomposition:e==null?void 0:e.decomposition,isZero:(e==null?void 0:e.inUSDC)===0n},{id:"BuilderForm__MinReceivedDecompositionTooltip",decomposition:t==null?void 0:t.decomposition,isZero:(t==null?void 0:t.inUSDC)===0n},{id:"BuilderForm__CollateralCostDecompositionTooltip",decomposition:i==null?void 0:i.decomposition,isZero:(i==null?void 0:i.inUSDC)===0n}];return n.jsx("div",{className:"CostDecompositionTooltips",children:a.map(s=>!s.decomposition||s.isZero?null:n.jsx(eo,{id:s.id,priceDecompositionArr:s.decomposition},s.id))})};const Wn="/assets/pen-7561a00e.svg",no=({slippage:e,setSlippage:t})=>{const i=c=>`${Dt(c*100,6)}`,[a,s]=b.useState(i(e)),{node:r,ref:o,hasFocus:l}=nt([a,s],{maxValue:100}),p=()=>{const c=i(ft);s(c)},d=()=>{const c=Number(a)/100;t(c)},u=()=>{const c=o.current,m=c.value.includes(".");let g=(c.value.length+1)*8.5;m&&(g-=4),c.style.width=g+"px"},y=()=>{(!a||Number(a)===0)&&p()};return b.useEffect(()=>{a&&d(),u()},[a]),b.useEffect(()=>{l||y()},[l]),n.jsxs("div",{className:"SlippageInput",onClick:()=>{var c;return(c=o.current)==null?void 0:c.focus()},children:[n.jsxs("div",{className:E("SlippageInput__input-container",l&&"focused"),children:[r,n.jsx("span",{className:"SlippageInput__unit",children:"%"})]}),n.jsx("button",{className:"SlippageInput__btn",children:n.jsx("img",{src:Wn,alt:"Edit slippage"})})]})},io=({swapSlippageState:e})=>{const[t,i]=e;return n.jsxs("div",{className:"SwapSlippageField info-row",children:[n.jsx("div",{className:"info-row__title",children:"Slippage"}),n.jsx("div",{className:"info-row__value",children:n.jsx(no,{slippage:t,setSlippage:i})})]})},ao=({strategy:e,amountStr:t,chosenStrikesState:i,collateralDataArrState:a,youPayState:s,swapSlippageState:r})=>{const o=se[e].structure,l=Ft(o),p=Cs(o),[d,u]=s,[y,c]=i,[m,g]=a,[f,T]=b.useState(null),[C,h]=b.useState(null),[S,M]=b.useState(null),[P,j]=b.useState(null),I=_s(y),R=!!m.find(k=>k),L=Nt(d),O=k=>{y[k]=null,m[k]=null,c([...y]),g([...m])},v={sum:k=>k.reduce((D,N,U)=>{if(U===0)return{inUSDC:N.inUSDC,decomposition:[N]};const V=D.decomposition;return V[U]={marketToken:N.marketToken,inMarketToken:N.inMarketToken,inUSDC:N.inUSDC},{inUSDC:D.inUSDC+N.inUSDC,decomposition:V}},k[0]),separateBuyFromSell:k=>{const A=[],D=[];return k.forEach(N=>{N&&(N.isBuy?A.push(N):D.push(N))}),{buyCosts:A,sellCosts:D}},getArgsForHandler:k=>{const{reset:A}=F[k],{isAllowed:D,update:N}=B[k];return[A,D,N]}},F={collateral:{reset:()=>{j({inUSDC:0n})}},trade:{reset:()=>{T(null),h(null),M(null)}},youPay:{reset:()=>{u(null)}}},_={collateral:{calc:()=>{const k=m.filter(D=>D);return v.sum(k)}},trade:{calc:()=>{if(!t)return;const k=[],A=$(pe(t));return y.forEach((D,N)=>{D&&k.push(D.utils.calcPremium(A).then(U=>U?(D.premiumData=U,D.amount=A,U.isBuy=D.isBuy,U):(O(N),null)))}),Promise.all(k).then(D=>{const{buyCosts:N,sellCosts:U}=v.separateBuyFromSell(D);return{maxCost:v.sum(N),minReceived:v.sum(U)}})}},youPay:{calc:()=>{let k;return l?P!=null&&P.inUSDC&&(k={inUSDC:P.inUSDC+((f==null?void 0:f.inUSDC)??0n),decomposition:As(o,f==null?void 0:f.decomposition,P.decomposition),shouldSwap:L}):k={inUSDC:f.inUSDC,decomposition:f.decomposition},k}}},B={collateral:{triggers:[m],isAllowed:R&&I,update:()=>{const k=_.collateral.calc();j(k)}},trade:{triggers:[y],debouncedTriggers:[t],isAllowed:I,update:()=>{_.trade.calc().then(k=>{const{maxCost:A,minReceived:D}=k;T(A),h(D);const N={inUSDC:((D==null?void 0:D.inUSDC)??0n)-((A==null?void 0:A.inUSDC)??0n)};M(N)})}},youPay:{triggers:[S,P],isAllowed:!!(l?S!=null&&S.inUSDC&&(P!=null&&P.inUSDC):S!=null&&S.inUSDC),update:()=>{const k=_.youPay.calc();u(k)}}},x=(k,A,D)=>{k(),A&&D()};return Object.keys(B).forEach(k=>{const A=()=>{x(...v.getArgsForHandler(k))},D=[...B[k].triggers],N=B[k].debouncedTriggers&&[...B[k].debouncedTriggers];N&&ze(A,tt,N),b.useEffect(A,D)}),n.jsxs("div",{className:E("BuilderCost",l&&"has-sell"),children:[n.jsxs("div",{className:"BuilderCost__content",children:[n.jsx(Jr,{hasBuy:p,hasSell:l,hasChosenStrike:I,maxCost:f,minReceived:C,netCost:S,collateralCost:P}),L&&n.jsx(io,{swapSlippageState:r})]}),n.jsx(to,{maxCost:f,minReceived:C,collateralCost:P})]})};const so=({decompositionData:e})=>n.jsx("div",{className:"GreeksDecompositionTooltips",children:bt.map(t=>{const i=e[t];if(!i||!i.length)return null;const s=`BuilderForm_${Bn(t)}DecompositionTooltip`;return n.jsx($n,{id:s,decompositionArr:i},s)})}),ro=({chosenStrikes:e})=>{const t={};bt.forEach(l=>{t[l]=[]});const i=(l,p)=>{const d=l.greeks[p],u={nameNode:n.jsx(pt,{strikeData:l,priceNode:`$${ie(l.strike)}`}),valueNode:d};t[p].push(u)},a=()=>n.jsx("div",{className:"BuilderCalculations__items",children:bt.map(l=>{const p=Bn(l),d=e.reduce((u,y)=>{if(!y)return u;i(y,l);const c=y.greeks[l];return u+c},0);return n.jsxs("div",{className:"BuilderCalculations__item",children:[n.jsx("div",{className:"BuilderCalculations__item-name",children:p}),n.jsx("div",{className:E("BuilderCalculations__item-value",e.length&&"tip"),"data-tooltip-id":`BuilderForm_${p}DecompositionTooltip`,children:Je(d,3)})]},l)})}),s=()=>n.jsx(Ln,{renderHeader:({state:l})=>`${l.isEnter?"Hide":"Show"} greeks`,children:a()}),o=ut(576);return n.jsxs("div",{className:"BuilderGreeks",children:[o?s():a(),n.jsx(so,{decompositionData:t})]})};const oo=({youPayState:e,paymentToken:t})=>{const i=G(),[a,s]=e,r=()=>a.inUSDC<0?new Promise(u=>{u(null)}):Ls(i,t.address,a.inUSDC),o={triggers:[a],isAllowed:!!(a&&t&&ee(a.inPaymentToken)),update:()=>{const u=()=>{setTimeout(()=>{s({...a})},1e3)};if(!Nt(a,t)){a.inPaymentToken=a.decomposition.reduce((c,m)=>m?c+m.inMarketToken:c,0n),a.paymentToken=t,u();return}r().then(c=>{a.paymentToken=t,a.inPaymentToken=c,u()})}},l={triggers:[t.symbol],isAllowed:!!a,reset:()=>{a.inPaymentToken=void 0,s({...a})}};b.useEffect(()=>{o.isAllowed&&o.update()},[...o.triggers]),b.useEffect(()=>{l.isAllowed&&l.reset()},[...l.triggers]);const p={getNegativeValueNode:()=>n.jsx(te,{children:n.jsx("span",{className:"negative tip","data-tooltip-id":"BuilderForm_YouPayWarningTooltip",children:W(a.inUSDC,0)})}),getPaymentTokenNode:()=>Oe(a.inPaymentToken,a.paymentToken.isStable),getUsdcNode:()=>`$${W(a.inUSDC,2)}`,getApproximatelySymbolNode:()=>n.jsx("span",{className:"muted_light mx-5",style:{fontSize:16},children:ls})};return(()=>!a||!t?ae():a.inPaymentToken===null?p.getNegativeValueNode():ee(a.inPaymentToken)?n.jsx(fe,{}):n.jsxs(te,{isHlight:!0,symbol:t.symbol,children:[p.getPaymentTokenNode(),p.getApproximatelySymbolNode(),p.getUsdcNode()]}))()};const lo=({className:e,options:t,defaultOption:i,defaultValue:a,onChange:s,...r})=>n.jsx(Pe,{className:E("SelectorInline",e),options:t,defaultOption:i,defaultValue:a,onChange:s,...r}),po=e=>{const{account:t}=K();return e.map(a=>{let{data:s}=ri({address:t,token:a.isETH?null:a.address,watch:!0});return s||(s={value:0n}),{...s,address:a.address,symbol:a.symbol,isETH:a.isETH,isStable:a.isStable}})},uo=e=>{const{isConnected:t,account:i}=K(),a=G(),s=po(e),{data:r}=je(t&&[i,"useTokenBalancesUSDC",s],async()=>{const o=[],l=[];return s.forEach((p,d)=>{p&&(p.inTokenDecimals=p.value,p.inDefaultDecimals=ye(p.value,p.decimals),l.push(rt(a,p.address,p.inDefaultDecimals).then(u=>{o[d]={...p,inUSDC:u}}).catch(u=>{console.log(`Swapping ${p.symbol} to USDC error.

`+u),o[d]=null})))}),await Promise.all(l),o});return r??[]},yo=({paymentTokens:e,paymentToken:t,setPaymentToken:i})=>{const{isConnected:a,account:s}=K(),r=uo(e),o=()=>{const u=r.find(y=>y.symbol===t.symbol);u!==t.balance&&i({...t,balance:u})};b.useEffect(()=>{o()},[r,s]);const l=u=>a?u===null?ae("Error"):ee(u)||ee(u.inUSDC)?n.jsx(fe,{}):`$${W(u.inUSDC,0)}`:ae(),p=e.map((u,y)=>{const c=r[y],m=l(c);return{label:n.jsxs("div",{className:"PaymentTokenSelector__item",children:[n.jsx("div",{className:"PaymentTokenSelector__item-name",children:n.jsx(te,{symbol:u.symbol,isHlight:!0,children:u.symbol})}),n.jsx("div",{className:"PaymentTokenSelector__item-value",children:m})]}),value:u.symbol,balance:c}}),d=[{label:n.jsxs("div",{className:"PaymentTokenSelector__item",children:[n.jsx("div",{children:"Asset"}),n.jsx("div",{children:"Balance, $"})]}),options:p}];return n.jsx(lo,{className:"PaymentTokenSelector",options:d,defaultValue:t.symbol,onChange:u=>{i({symbol:u.value,balance:u.balance})}},s)},co=({paymentToken:e,setPaymentToken:t,youPayState:i,confirmButtonNode:a})=>{const{isConnected:s}=K(),r=G(),o=ga(r),l=()=>{if(!s)return ae();if(e.balance===null)return ae("Error");if(ee(e.balance))return n.jsx(fe,{});const p=e.balance.value===0n?0:void 0;return n.jsx(te,{symbol:e.symbol,isHlight:!0,children:Oe(e.balance.inDefaultDecimals,e.isStable,p)})};return n.jsxs("div",{className:"BuilderSwap",children:[n.jsxs("div",{className:"BuilderCalculations__items",children:[n.jsxs("div",{className:"BuilderCalculations__item",children:[n.jsx("div",{className:"BuilderCalculations__item-name",children:"Select Payment method"}),n.jsx("div",{className:"BuilderCalculations__item-value",children:n.jsx(yo,{paymentTokens:o,paymentToken:e,setPaymentToken:t})})]}),n.jsxs("div",{className:"BuilderCalculations__item",children:[n.jsx("div",{className:"BuilderCalculations__item-name",children:"You pay"}),n.jsx("div",{className:"BuilderCalculations__item-value",children:n.jsx(oo,{youPayState:i,paymentToken:e})})]}),n.jsxs("div",{className:"BuilderCalculations__item",children:[n.jsx("div",{className:"BuilderCalculations__item-name",children:"Balance"}),n.jsx("div",{className:"BuilderCalculations__item-value",children:l()})]})]}),a]})},mo=(e,t,i,a,s,r)=>{const{isConnected:o}=K(),l=Ft(t),p=()=>{if(!e)return"Enter Amount";if(i.length!==t.length||!i.every(m=>m))return"Fill out the Strike fields";const c=!!a.find(m=>m&&m.inMarketToken===0n);if(l&&c)return"Fill out the Collateral fields";if(!s)return"Please, wait...";if(s>r)return"Insufficient balance"};return{getError:p,getIsBtnEnabled:()=>o?!p():!0,getBtnText:()=>{const y="Buy Strategy";return o?p()??y:"Connect wallet"}}},To=({strategy:e,amountStr:t,youPayState:i,chosenStrikesState:a,collateralDataArrState:s,openBuyModal:r,swapSlippageState:o})=>{var P;const{isConnected:l}=K(),{connectWallet:p}=kn(),d=G(),[u,y]=xt("builder-payment-token","ETH"),[c,m]=b.useState({symbol:u});b.useEffect(()=>{if(y(c.symbol),!c.address){const j=he(d,c.symbol);m({...c,...j})}},[c]);const[g]=a,[f]=s,[T]=i,C=se[e].structure,{getIsBtnEnabled:h,getBtnText:S}=mo(t,C,g,f,T==null?void 0:T.inPaymentToken,(P=c.balance)==null?void 0:P.inDefaultDecimals),M=n.jsx(ce,{className:"BuilderForm__button",onClick:l?r:p,isDisabled:!h(),children:S()});return n.jsxs("div",{className:"BuilderCalculations",children:[n.jsx(ro,{chosenStrikes:g}),n.jsx(ao,{strategy:e,amountStr:t,chosenStrikesState:a,collateralDataArrState:s,youPayState:i,swapSlippageState:o}),n.jsx(co,{youPayState:i,paymentToken:c,setPaymentToken:m,confirmButtonNode:M})]})};const fo=({stagesArr:e})=>n.jsx("div",{className:"Stages",children:e.map(t=>n.jsx("div",{className:E("Stages__item",t.isActive&&"active"),children:t.name},t.name))}),qn=(e,t,i,a=s=>{})=>{const{account:s}=K(),r=G(),o=he(r,e);return{check:async()=>o.isETH?new Promise(p=>p(!0)).then(a):hs(r,o,s,t,i).then(a),approve:async(p,d)=>{if(o.isETH)throw new Error("Trying to approve ETH");return bs(r,o,t,i,p,d)}}},bo=(e,t,i,a,s,r={setIsLoading:()=>{},closeModal:()=>{},addPendingPosition:()=>{}})=>{const o=G(),l=se[e],{setIsLoading:p,closeModal:d,addPendingPosition:u}=r,{paymentToken:y,decomposition:c}=a,m=y.isETH,[g,f]=b.useState({moduleArr:[],parametersArr:[],swapDataArr:[],productType:l.key}),[T,C]=b.useState([]),h=()=>T.reduce((O,v)=>O+v,0n),S=new z(...Z(o,"TxBuilder"),xe()),M=(L,O)=>{const v=ds[L.protocolName];return S.module(v).then(F=>{g.moduleArr[O]=F})},P=(L,O)=>{const v=i[O],F={setToCollateral:v&&Y.from(v.inMarketToken),isBaseCollateral:v==null?void 0:v.isBase,premiumInMarketToken:L.premiumData.inMarketToken};return L.utils.getBuilderParams(L.amount,F,y.decimals).then(_=>{g.parametersArr[O]=_})},j=(L,O)=>{const v=c[O],F=new z(...Z(o,"Exchanger"),ne(o)),_=v.marketToken,B=Rs(y.address,_.address),x=v.inMarketToken,w=Dn(y,_);return Lt(o,_.address,y.address,x).then(k=>Rt(k,s)).then(k=>{const A=Ce(k,y.decimals),D=Ce(x,_.decimals);return m&&(T.push(A),C([...T])),F.encodeFromExchange({path:B,tokenIn:y.address,tokenOut:_.address,amountIn:A,amountOutMinimum:D,isETH:m,swap:w}).then(N=>{g.swapDataArr[O]=N})})},I=()=>{const L=[];return t.forEach((O,v)=>{L.push(M(O,v),P(O,v),j(O,v))}),Promise.all(L).then(()=>{f({...g})}).catch(()=>p(!1))};return()=>{p(!0);const{amount:L,asset:O}=t[0];return I().then(()=>{const v=H(L),F=v!==1,_=l.plural??`${e}s`;return at(o,S.consolidationOfTransactions,[g.moduleArr,g.parametersArr,g.swapDataArr,g.productType,T.length?{value:h()}:{}],`${v} ${F?_:e} opened.`,p,d)}).then(()=>{C([])})}},Gn=()=>({opening:[],closing:[]}),Be=b.createContext(Gn()),Xt=(e,t)=>{const[i,a]=e;for(const s in i){const r=i[s];if(r.length){const o=r.filter(l=>l.market!==t);i[s]=o,a({...i})}}},ho=({isOpen:e,setIsOpen:t,asset:i,strategy:a,amountStr:s,chosenStrikes:r,collateralDataArr:o,youPay:l,swapSlippage:p})=>{const d=G(),u=se[a],[y,c]=b.useState(!1),[m,g]=b.useState(null),[f,T]=b.useContext(Be),C=bo(a,r,o,l,p,{setIsLoading:c,closeModal:()=>t(!1),addPendingPosition:A=>{A.isOpening=!0,f.opening.push(A),T({...f})}}),h=Nt(l),M=["Approve","Buy"].map(A=>({name:A,isActive:m===A})),{paymentToken:P,inPaymentToken:j}=l,I=Rt(j,h?Yt+p:Yt),R=Oe(I,P.isStable),L=P.symbol,O=`${R} ${L}`,v={Approve:`Approve ${O}`,Buy:`Pay ${O}`},F=new z(...Z(d,"Exchanger"),xe()),_=qn(L,F.address,I,A=>{g(A?"Buy":"Approve")}),B=()=>{g(null),_.check()};b.useEffect(()=>{e&&B()},[e,l]);const x=()=>{if(!m)return"Please, wait...";if(y){if(m==="Approve")return`Approving ${L}...`;if(m==="Buy")return`Buying ${a}...`}},w={approve:()=>{_.approve(c,B)},buy:C},k={getBtnText:()=>x()??v[m],getIsBtnEnabled:()=>!x(),getBtnOnClick:()=>{switch(m){case"Approve":return w.approve;case"Buy":return w.buy}}};return n.jsxs(Fe,{className:"BuyBuildModal",isOpen:e,setIsOpen:t,children:[n.jsx(fo,{stagesArr:M}),n.jsx("h1",{className:"BuyBuildModal__title",children:m??n.jsx(fe,{})}),n.jsxs("div",{className:"BuyBuildModal__strategy",children:["Strategy",n.jsxs("div",{className:"BuyBuildModal__strategy-info",children:[n.jsx("span",{className:"BuyBuildModal__strategy-name",style:{color:u.color},children:a}),n.jsx(Ie,{isVertical:!0}),n.jsx(te,{className:"BuyBuildModal__strategy-amount",symbol:i,isHlight:!0,children:s})]})]}),h&&n.jsx("div",{className:"BuyBuildModal__footer",children:n.jsxs("p",{className:"BuyBuildModal__hint",children:["Sharwa.Finance will auto-convert your ",O," into tokens compatible with the options protocols where your positions are to be opened, using Uniswap v3."]})}),n.jsx(ce,{className:"BuyBuildModal__button",isDisabled:!k.getIsBtnEnabled(),onClick:k.getBtnOnClick(),children:k.getBtnText()})]})},go=e=>!(typeof e!="number"||e>1||e<0),xo=({assetState:e,strategyState:t,amountStrState:i,dateListState:a,chosenDateState:s,strikesDataArrState:r,chosenStrikesState:o,collateralDataArrState:l})=>{const p=b.useState(null),[d]=p,[u,y]=b.useState(!1),c=xt("Builder-swap-slippage",ft),[m,g]=c;go(m)||g(ft);const[f]=e,[T]=t,[C]=i,[h]=o,[S]=l,M=()=>{y(!0)};return n.jsxs("div",{className:"BuilderForm App-box",children:[n.jsx(Rr,{assetState:e,strategyState:t,amountStrState:i,dateListState:a,chosenDateState:s,strikesDataArrState:r,chosenStrikesState:o,collateralDataArrState:l}),n.jsx(To,{strategy:T,amountStr:C,youPayState:p,chosenStrikesState:o,collateralDataArrState:l,openBuyModal:M,swapSlippageState:c}),(d==null?void 0:d.inPaymentToken)&&n.jsx(ho,{isOpen:u,setIsOpen:y,asset:f,strategy:T,amountStr:C,chosenStrikes:h,collateralDataArr:S,youPay:d,swapSlippage:m}),n.jsx(Kr,{strategy:T})]})};const Co=({asset:e,strategy:t,amountStr:i,chosenStrikes:a,collateralDataArr:s})=>{var B;const r=se[t].structure,o=b.useRef(null),l=pe(i),p={amount:l,strikes:a.map(x=>x==null?void 0:x.strike),premiums:a.map(x=>{const w=x==null?void 0:x.premiumData.inUSDC;return w&&H(w)}),strategies:r,collaterals:s,isReady:l&&a.length===r.length&&a.every(x=>x)},d=e==="ETH",u=d?.3:.2,y=d?5:10,c=100,m=Ht(e),g=H(m),f=g&&Math.round(g/y)*y,T=(x,w)=>{const k=p.strategies[x],A=p.premiums[x],D=p.strikes[x],N=p.amount,U=p.collaterals[x],V=(U==null?void 0:U.liquidationPrice)&&H(U.liquidationPrice),ue=U&&H(U.inMarketToken),_e=U==null?void 0:U.isBase;let q;if(A){switch(k){case 1:w<D?q=-A:q=(w-D)*N-A;break;case 2:w>D?q=-A:q=(D-w)*N-A;break;case-1:if(V&&w>V)_e?q=-(ue*V)+A:q=-ue+A;else if(_e){const Xn=(D-g)*N+A;w>D?q=Xn:q=(w-g)*N+A}else w<D?q=A:q=(D-w)*N+A;break;case-2:V&&w<V?_e?q=-(ue*V)+A:q=-ue+A:w>D?q=A:q=(w-D)*N+A;break}if(q)return Number(q)}},h=(()=>{if(!p)return;const x=p.strikes.reduce((U,V)=>(U+V)/2,p.strikes[0]),w=window.innerWidth>480?u:u-.05,k=Math.round(x*(1-w)/100)*100,A=Math.round(x*(1+w)/100)*100,D=[];for(let U=0;U<(A-k)/y;U++){const V=k+U*y;D.push(V)}const N=[];return p.strategies.forEach((U,V)=>{D.forEach((ue,_e)=>{const q=T(V,ue);V===0?N.push({closePrice:ue,pnl:q}):N[_e].pnl=N[_e].pnl+q})}),N})(),S=(B=h.reduce((x,w)=>w.pnl>x.pnl?w:x,h[0]))==null?void 0:B.pnl,M=S&&ie(S.toFixed(0)),j=(()=>{if(!h)return;const x=Math.max(...h.map(A=>A.pnl)),w=Math.min(...h.map(A=>A.pnl));if(x<=0)return 0;if(w>=0)return 1;const k=x/(x-w);return isNaN(k)?0:k})(),I=({value:x,cx:w,cy:k})=>{const A=x[1];let D;return A<0?D=J:A>0?D=ge:D=Re,n.jsx("circle",{cx:w,cy:k,r:5,style:{opacity:"0.9"},fill:D})},R=x=>{const{active:w,payload:k,label:A}=x,D=w&&k&&k.length&&Number(k[0].value.toFixed(2));return w&&k&&k.length?n.jsxs("div",{className:"react-tooltip",children:[n.jsx(te,{currencyName:e,isHlight:!0,isSmall:!0,children:ie(A)}),n.jsxs("p",{children:["PnL ",n.jsx("span",{className:E({positive:D>0,negative:D<0}),children:`${D!==0?D>0?"+":"-":""}$${ie(Math.abs(D))}`})]})]}):null},L=x=>ie(x),O={fill:Re,fontSize:13},v=dt,[F,_]=b.useState(null);return b.useEffect(()=>{if(o.current&&h){let x;const w=Math.round(c/(o.current.clientWidth/h.length));w<20?x=19:x=Math.floor(w/20)*20-1,_(x)}},[o.current,h,window.innerWidth]),n.jsx("div",{className:"BuilderPositionChart App-box",ref:o,children:p.isReady?n.jsx(Oi,{children:n.jsxs(Fi,{data:h,margin:{left:(M==null?void 0:M.length)*7.5-40,right:15,top:15},children:[n.jsx(Ni,{dataKey:"closePrice",interval:F,tickFormatter:L,tick:O,stroke:v}),n.jsx(Li,{dataKey:"pnl",tickFormatter:L,tick:O,stroke:v,padding:{bottom:15}}),n.jsx(Ri,{cursor:{stroke:Re},content:n.jsx(R,{})}),n.jsx(Ui,{type:"monotone",dot:!1,dataKey:"pnl",stroke:"url(#splitColor)",activeDot:n.jsx(I,{}),fill:"url(#splitColorTransparent)"}),n.jsxs("defs",{children:[n.jsxs("linearGradient",{id:"splitColor",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:j,stopColor:ge,stopOpacity:1}),n.jsx("stop",{offset:j,stopColor:J,stopOpacity:1})]}),n.jsxs("linearGradient",{id:"splitColorTransparent",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:j,stopColor:ge,stopOpacity:.3}),n.jsx("stop",{offset:j,stopColor:J,stopOpacity:.3})]})]}),n.jsx($t,{x:f,stroke:dt,strokeDasharray:"3 3",label:{value:"Current Price",fill:dt,fontSize:window.innerWidth>768?15:13,position:"insideTopLeft",writingMode:"tb-rl",offset:9}}),p.collaterals.length&&p.collaterals.map(x=>{if(!x||!x.liquidationPrice)return;const w=H(x.liquidationPrice),k=Math.round(w/y)*y;return n.jsx($t,{x:k,stroke:J,strokeDasharray:"3 3",label:{value:"Liq. Price",fill:J,fontSize:window.innerWidth>768?15:13,position:"insideTopLeft",writingMode:"tb-rl",offset:9}},w)}),n.jsx(Hi,{stroke:"rgba(58, 68, 102, 0.15)"})]})}):n.jsx(Ke,{children:"Fill out the Strike fields to view position chart"})})},_o=e=>{const{assetState:t}=e,i=b.useState("Long Call"),a=b.useState("1"),s=b.useState([]),r=b.useState(null),o=b.useState([]),l=b.useState([]),p=b.useState([]),[d]=t,[u]=i,[y]=a,[c]=l,[m]=p;return n.jsxs("div",{className:"BuilderDashboard",children:[n.jsx(xo,{assetState:t,strategyState:i,amountStrState:a,dateListState:s,chosenDateState:r,strikesDataArrState:o,chosenStrikesState:l,collateralDataArrState:p}),n.jsx(Co,{asset:d,strategy:u,amountStr:y,chosenStrikes:c,collateralDataArr:m})]})},Vn=async(e,t,i,a)=>{const s=i%t;if(a+1>i-s&&(t=s),e.length>=t){await Promise.all(e),fs(e);return}},ko=13,Kn=e=>{const{isConnected:t,account:i}=K(),a=G(),s=Ne(),[r,o]=b.useState(void 0),l=()=>{r&&o(void 0)},p=new z(...Z(a,"Hegic_PositionManager"),ne(a)),{error:d,mutate:u}=je(t&&s&&[i,"useHegicPositions"],async()=>{const y=[],c=wa(a),m=So(p,i),f=(await p.queryFilter(m)).map(T=>T.args.tokenId);if(f.length){const T=[];for(let C=0;C<c.length;C++){const h=c[C],S=un(a,h),M=vo(h,f),P=S.queryFilter(M).then(j=>Promise.all(j.map(I=>wo(a,I,i,s).then(R=>{R&&y.push(R)}))));T.push(P),await Vn(T,ko,c.length,C)}}return o(y??[]),e&&e(),y},{refreshInterval:In});if(b.useEffect(()=>{l(),i&&u().then(o)},[i,t]),d){console.log(`Fetching Hegic positions error:
`,d);return}return r},So=(e,t)=>({address:e.address,topics:[Qt("Transfer(address,address,uint256)"),null,Jt(t,32)]}),vo=(e,t)=>{const i=[Qt("Acquired(uint256,(uint128,uint128),uint256,uint256,uint256,bytes[])"),t.map(s=>Jt(s,32))];return{address:e,topics:i}},wo=async(e,t,i,a)=>{const s=t.address,r=be(t.decode(t.data,t.topics));r.data=be(r.data);const o=new z(...Z(e,"Hegic_OperationalTreasury"),ne(e)),l=await o.lockedLiquidity(r.id);if(!(l.state!==0))return;const{asset:d,isCall:u,isSpread:y,strikeScale:c}=Po(e,s);Object.assign(r,{asset:d,isCall:u,isSpread:y});const m=gs(r.data.amount,d),g=a[d],f=Ao(r,c);Object.assign(r,{strike:f});const{premium:T,pnl:C}=await Bo(e,r,s),h=C.inPercentage===$(-100),S=l.expiration*Te,M=Do(r,g);return{id:Number(r.id),market:"Hegic",asset:d,amount:m,strike:f,isCall:u,isSpread:y,isBuy:!0,premium:T,pnl:C,expiry:S,greeks:M,utils:{calcPnl:async()=>new Promise(j=>{j(C)})},actions:{close:async()=>{const j=xe();return o.connect(j).payOff(r.id,i)},isClosingDisabled:h}}},Po=(e,t)=>{const i=va(e),a=Object.keys(i).find(d=>i[d]===t),[s,r,o]=a.split("_"),l=s.includes("CALL"),p=s.includes("SPREAD");return{asset:o,isCall:l,isSpread:p,strikeScale:r}},Ao=(e,t)=>{const i=ye(e.data.strike,Ea);let a=i/100n*BigInt(t);return e.isSpread&&(a=i),a},Bo=async(e,t,i)=>{const a=un(e,i),s=ct(ye(t.positivepnl,yt)),r=ye(BigInt(await a.payOffAmount(t.id)),yt),l={inUSDC:r+s,inPercentage:lt(r,s)};return{premium:s,pnl:l}},Do=(e,t)=>{const{isCall:i,strike:a}=e;return{delta:Hs(i,a,t),vega:0,gamma:0,theta:0,rho:0}},Yn=e=>{const{account:t,isConnected:i}=K(),[a,s]=b.useState(void 0),r=()=>{a&&s(void 0)},o=G(),l=sn(o),{error:p,mutate:d}=je(i&&[t,"useLyraPositions"],async()=>{const u=await l.positions(t);if(!u){s([]);return}const y=u.filter(Io),c=[];for(let m=0;m<y.length;m++){const g=y[m];c.push(await Eo(o,g))}return s(c),e&&e(),c},{refreshInterval:In});return b.useEffect(()=>{r(),t&&d().then(s)},[t,i]),p?(console.log(`Fetching Lyra positions error:
`,p),null):a},Eo=async(e,t)=>{const{id:i,strikePrice:a,isCall:s,isLong:r,size:o,expiryTimestamp:l}=be(t),p=l*Te,{asset:d,premium:u,pnl:y,greeks:c,collateral:m}=await Mo(e,t);return{id:i,market:"Lyra",asset:d,amount:o,strike:a,isCall:s,isBuy:r,premium:u,collateral:m,pnl:y,expiry:p,greeks:c,utils:{calcPnl:async(f=t.size)=>t.trade(!t.isLong,Y.from(f),Ue).then(T=>{const C=BigInt(T.pnl()),h=lt(C-u,u);return{inUSDC:C,inPercentage:h}})},actions:{close:async f=>{const T=Y.from(f),C={referrer:vn};return t.close(T,Ue,C).then(h=>{if(h.isDisabled){we(new Error(h.disabledReason));return}return xe().sendTransaction(h.tx)})},addToCollateral:async f=>{const T=m.inMarketToken+f;return t.trade(r,Y.from(0),Ue,{position:t,setToCollateral:Y.from(T)}).then(C=>(C.isDisabled&&we(new Error(C.disabledReason)),xe().sendTransaction(C.tx)))},isAddingToCollateralDisabled:!(m!=null&&m.liquidationPrice)}}},Mo=async(e,t)=>{const i=()=>t.marketName.split("-USDC")[0],a=()=>t.trades().reduce((d,u)=>(u=be(u),u.isBuy?d-u.premium:d+u.premium),0n),s=()=>{const{unrealizedPnl:l,unrealizedPnlPercentage:p}=be(t.pnl());return{inUSDC:l,inPercentage:p*100n}},r=()=>{const{delta:l,theta:p,rho:d}=t.liveOption(),{vega:u,gamma:y}=t.liveStrike(),c={delta:l,vega:u,gamma:y,theta:p,rho:d};for(const m in c){const g=c[m];c[m]=H(g.toBigInt(),Q,3)}return c},o=async()=>{const l=t.collateral&&be(t.collateral);if(l)return Fn(e,l,i())};return{asset:i(),premium:a(),pnl:s(),greeks:r(),collateral:await o()}},Io=e=>{const{size:t,expiryTimestamp:i}=be(e),a=t===0n,s=i*Te<Date.now();return!(a||s)},jo=6,Oo=()=>{const{isConnected:e,account:t}=K(),i=G(),a=new z(...Z(i,"TxBuilder"),ne(i)),{data:s,error:r}=je(e&&[t,"useBuilderPositionsStructure"],async()=>{const o=[],l=await No(a,t),p=[];for(let d=0;d<l.length;d++){const u=l[d],{buildID:y,productType:c}=u.args,g={strategy:Pn.find(h=>se[h].key===c.toNumber()),buildId:y.toNumber(),childPositionsStructure:[]},f=Fo(i,y),T=[];for(const h in f)f[h].forEach(M=>{M.then(P=>{Ro(P,h,g.childPositionsStructure)}),T.push(M)});const C=Promise.all(T).then(()=>{o.push(g)});p.push(C),await Vn(p,jo,l.length,d)}return o},{refreshInterval:2e4});if(r){console.log(`Builder Positions error:
`,r);return}return s},Fo=(e,t)=>{const{Hegic:i,Lyra_ETH:a,Lyra_BTC:s}=Ps(e),{OpenPositionByHegic:r}=i.filters,{OpenPositionByLyra:o}=a.filters,{OpenPositionByLyra:l}=s.filters,p=[i.queryFilter(r(t))],d=[a.queryFilter(o(t)),s.queryFilter(l(t))];return{Hegic:p,Lyra:d}},No=(e,t)=>{const{CreateBuild:i}=e.filters;return e.queryFilter(i(null,t)).then(s=>{const r=s.map(o=>Lo(o,e.provider));return Promise.all(r).then(o=>s.filter((p,d)=>{if(o[d])return!0}).reverse())})},Lo=(e,t)=>t.getBlock(e.blockNumber).then(i=>{const a=Ve[Ve.length-1],s=Date.now()-a-an(1);if(i.timestamp*Te>s)return!0}),Ro=(e,t,i)=>{e.forEach(a=>{const s=a.args.tokenID;i.push({market:t,id:s.toNumber()})})},{PARENT_COMPLEX:Uo,PARENT_SIMPLE:Ho,CHILD:zn}=An,$o=e=>{const t=b.useContext(Be),i={Lyra:()=>{Xt(t,"Lyra")},Hegic:()=>{Xt(t,"Hegic")}},a={Lyra:Yn(i.Lyra),Hegic:Kn(i.Hegic)},s=Object.values(a),r=s.every(y=>ee(y)),o=s.every(y=>!ee(y)),l=Oo();if(!l||r)return;const d=l.map(y=>{const{childPositionsStructure:c}=y,m=[],g=c.length===1;for(let f=0;f<c.length;f++){const{id:T,market:C}=c[f],h=a[C];if(!h)return;const S=h.findIndex(P=>P.id===T),M=h[S];M&&(m.push(M),h[S].role=zn)}if(m.length)if(g){const f={...m[0]};return{...y,...f,role:Ho}}else{const f=Go(m),T=m[0].asset;return{...y,childPositions:m,asset:T,...f,role:Uo}}}).filter(y=>!ee(y));return o&&e&&e(),qo(d,a)},Wo=e=>{if(!e.length)return null;const t={premium:0n,collateral:{inUSDC:0n},pnl:{inUSDC:0n},greeks:{},isTotal:!0},i=e.reduce((a,s)=>{var o;const r=ot(a,s,["premium","pnl.inUSDC"]);return r.greeks=Nn(a.greeks,s.greeks),(o=s.collateral)!=null&&o.inUSDC&&(r.collateral.inUSDC+=s.collateral.inUSDC),r},t);return i.pnl.inPercentage=lt(i.pnl.inUSDC-i.premium,i.premium),i},qo=(e,t)=>{const i=[],a=[];Object.values(t).forEach(l=>{l&&a.push(...l)});const r=a.filter(l=>l.role!==zn).map(l=>{const{isCall:p,isSpread:d,isBuy:u}=l;return{strategy:`${d?p?"Bull":"Bear":u?"Long":"Short"} ${p?"Call":"Put"} ${d?"Spread":""}`.trim(),...l}});i.push(...e,...r);const o=Wo(a);return o&&i.push(o),i},Go=e=>{const t=e.reduce((i,a)=>{const s=ot(i,a,["amount","premium","pnl.inUSDC"]);return s.greeks=Nn(i.greeks,a.greeks),s.collaterals=a.collateral?[...i.collaterals,a.collateral]:i.collaterals,s},{amount:0n,premium:0n,collaterals:[],pnl:{inUSDC:0n},greeks:{delta:0,vega:0,gamma:0,theta:0,rho:0}});return t.pnl.inPercentage=lt(t.pnl.inUSDC-t.premium,t.premium),t.expiry=e[0].expiry,t};const Vo=({position:e,openCloseModal:t})=>{const[i]=b.useContext(Be);if(!e.actions)return null;const{isClosingDisabled:a}=e.actions,s=i.closing.find(o=>o.id===e.id),r=()=>{t(e)};return n.jsx("div",{className:"BuilderPositionCloseBtn",children:it(n.jsx(ce,{className:"close-btn",type:"micro",isDisabled:a,onClick:r,children:"Close"}),s)})},Ko=({handleClick:e})=>n.jsx("button",{onClick:e,className:"shrink-0",children:n.jsx("img",{src:Wn,alt:"Update Collateral"})}),{PARENT_COMPLEX:Yo,CHILD:zo}=An,Zo={strategy:"Strategy",amount:"Amount",strike:"Strike",premium:n.jsx("span",{"data-tooltip-id":"Builder_PremiumTooltip",className:"tip",children:"Premium"}),collateral:n.jsx("span",{"data-tooltip-id":"BuilderForm_CollateralTooltip",className:"tip",children:"Collateral"}),pnl:"PnL",liqPrice:"Liq. Price",delta:"Delta",vega:"Vega",gamma:"Gamma",theta:"Theta",rho:"Rho",expiry:"Expiration Date",closeBtn:""},Xo=({positions:e,openCollateralModal:t,openCloseModal:i,isLoadingComplete:a})=>{const{isConnected:s}=K(),r=y=>{const{role:c,isOpening:m,isTotal:g}=y,f=c===Yo,T=c===zo,C=()=>{if(T)return"";if(g)return ae("Total",!1,!0);const{strategy:_}=y,B=se[_],x=B==null?void 0:B.color,w=n.jsx("svg",{className:"icon-dropdown",xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",children:n.jsx("path",{d:"M2 5L6.5 9L11 5",stroke:x,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});return n.jsxs("span",{className:"flex items-center gap-x-4",style:{color:x},children:[m&&n.jsx(fe,{}),_,f&&w]})},h=()=>{const{asset:_,amount:B}=y;if(B)return n.jsx(te,{symbol:_,children:H(B)})},S=()=>{const{market:_,isCall:B,isBuy:x,strike:w}=y;if(f)return n.jsx("div",{className:"BuilderPositionsTable__strike-msg",children:ae("Click to see strikes")});if(w)return n.jsx(pt,{strikeData:{market:_,isCall:B,isBuy:x},priceNode:W(w,0)})},M=()=>{const{premium:_}=y,B=_<0n,x=W(ve(_)),w=`${B?"–":"+"}$${x}`;return n.jsx("span",{className:E({positive:!B,negative:B}),children:w})},P=()=>{const{collateral:_,collaterals:B,actions:x}=y;if(!_&&(!B||!B.length))return;const w=k=>g?n.jsxs("span",{children:["$",W(k.inUSDC)]}):n.jsx(te,{symbol:k.marketToken.symbol,children:Oe(k.inMarketToken,k.marketToken.isStable)},k.isBase);return f?j(B,w):x&&!x.isAddingToCollateralDisabled?n.jsxs("div",{className:"flex items-center gap-x-3",children:[w(_),n.jsx(Ko,{handleClick:()=>t(y)})]}):w(_)},j=(_,B)=>{const x={base:{},stable:{}},w=A=>{const{isBase:D}=A,N=D?"base":"stable";x[N]={...ot(x[N],A,["inMarketToken","inUSDC"]),isBase:D}};_.forEach(w);const k=Object.values(x).map(B);return n.jsx("div",{className:"flex flex-col gap-y-5",children:k})},I=()=>{if(!y.pnl)return;const{inUSDC:_,inPercentage:B}=y.pnl,x=_<0?"–":"",w=W(ve(_)),k=ve(B),A=H(k)<1?1:0,D=bn(k,A);return n.jsxs("div",{className:E({positive:_>0n,negative:_<0n,muted:_===0n}),children:[n.jsxs("span",{style:{color:Re,marginRight:5},children:[x,"$",w]}),`(${x}${D}%)`]})},R=()=>{const{collateral:_}=y;if(!(!_||!_.liquidationPrice))return`$${W(_.liquidationPrice)}`},L=()=>{const{greeks:_}=y;return _},O=()=>{const{expiry:_}=y;return _?en(_,"dd/MM/yy, hh a"):void 0},v=()=>f?y.childPositions.map(r):void 0,F=()=>m?"":n.jsx(Vo,{openCloseModal:i,position:y});return{id:`${y.buildId}_${y.id}`,strategy:C(),amount:h(),strike:S(),premium:M(),collateral:P(),pnl:I(),liqPrice:R(),...L(),expiry:O(),children:v(),closeBtn:F(),omittedKeys:(f||g)&&["strike","closeBtn"]}},o=Zo,l=e==null?void 0:e.map(r),p={titleData:o,itemsData:l},d=[{name:"Active",isActive:!0}],u=()=>{let y;return s?!e||!a?y="Loading...":e.length||(y="No open positions"):y="No wallet connected",n.jsx("div",{className:"App-box BuilderPositionsTable__message",style:a?{}:{marginBottom:10},children:ae(y)})};return n.jsxs("div",{className:"BuilderPositionsTable",children:[n.jsxs("div",{className:"BuilderPositionsTable__header",children:[n.jsx(kt,{links:d,type:"border"}),ae("*The table displays estimated PnL values. To view the actual PnL, click on the «Close» button",!0)]}),e!=null&&e.length?n.jsxs(n.Fragment,{children:[!a&&u(),n.jsx(Un,{structureData:p})]}):u()]})};const Zn=e=>{const{value:t,setValue:i,maxValue:a,placeholder:s,isDisabled:r,isFocused:o,hasError:l,formatInputStringFns:p=[Me,pe],title:d,presentedValue:u,presentedValueTitle:y,iconData:c,unitStr:m}=e,g=nt([t,i],{maxValue:a,placeholder:s,isDisabled:r,isFocused:o},p),f=E(e.className,g.hasFocus&&"hlight",l&&"error",r&&"disabled"),T=p[0];return n.jsxs("div",{className:E("InputFamily InputComplexNumeric",f),onClick:()=>{g.ref.current.focus()},children:[n.jsxs("div",{className:"InputComplexNumeric__header",children:[n.jsx("div",{className:"InputComplexNumeric__title",children:d}),u&&n.jsxs("button",{className:"InputComplexNumeric__presented-value",onClick:C=>{C.stopPropagation(),i(T(u))},children:[n.jsxs("span",{className:"InputComplexNumeric__presented-value-title",children:[y,":"]}),T(u)]}),c&&n.jsx("div",{className:"InputComplexNumeric__icon",children:n.jsx("img",{src:c.src,alt:c.alt??"icon"})})]}),n.jsxs("div",{className:"InputComplexNumeric__body",children:[n.jsx("div",{className:"InputComplexNumeric__input-wrapper",children:g.node}),n.jsxs("div",{className:"InputComplexNumeric__helper",children:[a&&n.jsx("button",{className:"InputComplexNumeric__max-btn",disabled:r,onClick:C=>{C.stopPropagation(),i(Me(a))},children:"Max"}),m&&n.jsx("div",{className:"InputComplexNumeric__unit",children:m})]})]})]})},Qo=({position:e,isOpen:t,setIsOpen:i})=>{var h;const a=G(),[s,r]=b.useState(""),[o,l]=b.useState(!1),[p,d]=b.useState(null),u=((h=e==null?void 0:e.collateral)==null?void 0:h.marketToken)??{symbol:"ETH"},y=on(u.symbol),c=qn(u==null?void 0:u.symbol,Ca(a,"Lyra_Quoter"),Ge(s),d),m=()=>{d(null),c.check()};if(b.useEffect(()=>{d(null)},[s]),ze(()=>{s&&m()},tt,[s]),!e||!e.collateral)return null;const g=()=>{if(!s)return"Enter Amount";if(p===null)return"Please, wait...";if(o)return p?"Updating Collateral...":`Approving ${u.symbol}...`},f=()=>!g(),T=()=>{const S=p?"Add Collateral":`Approve ${s} ${u.symbol}`;return g()??S},C=()=>{if(!p){c.approve(l,m);return}const S=Ge(s);at(a,e.actions.addToCollateral,[S],{text:`${s} ${u.symbol} added.`,node:n.jsxs(te,{symbol:u.symbol,children:[s," added to collateral."]})},l,()=>i(!1))};return n.jsxs(Fe,{className:"PositionCollateralModal",isOpen:t,setIsOpen:i,reset:()=>{r(""),d(null)},children:[n.jsx("h1",{children:"Edit Collateral"}),n.jsx(Zn,{value:s,setValue:r,title:"Add Amount",iconData:{src:y},isFocused:!0}),n.jsx(ce,{isDisabled:!f(),onClick:C,children:T()})]})};const Jo=(e,t,i)=>{const a=H(e,i);return el(a,t)},el=(e,t=2)=>{const i=e<0?"–":e>0?"+":"";return e=Math.abs(e),e=Dt(e,t),e=Tn(e,t),`${i}$${ie(e)}`},tl=({position:e,isOpen:t,setIsOpen:i})=>{const a=G(),[s,r]=b.useState(""),[o,l]=b.useState(void 0),[p,d]=b.useState(!1),[u,y]=b.useContext(Be),c=()=>{const w=Ua(e.amount);r(w)},m=w=>{l(void 0),e.utils.calcPnl(w).then(l)};if(b.useEffect(()=>{t&&e&&(c(),m())},[t]),ze(()=>{e&&s&&m(Ge(s))},tt,[s]),!e||!e.actions)return null;const g=w=>{if(w)u.closing.push({id:e.id,market:e.market});else{const k=u.closing.findIndex(A=>A.id===e.id);k!==-1&&u.closing.splice(k,1)}y({...u})},{close:f}=e.actions,{asset:T,amount:C,strategy:h,isCall:S,isBuy:M}=e,P=h??`${M?"Long":"Short"} ${S?"Call":"Put"}`,j=n.jsxs(te,{symbol:T,children:[s," ",P," closed."]}),R={text:`${s} ${T} ${P} closed.`,node:j},L=Ge(s),O=o==null?void 0:o.inUSDC,v=()=>{at(a,f,[L],R,d,()=>{g(!0),i(!1)})},F=()=>{if(!s)return"Enter Amount";if(p)return"Closing Strategy..."},_=()=>F()??"Close Strategy",B=()=>!F(),x=on(T);return n.jsxs(Fe,{className:"ClosePositionModal",isOpen:t,setIsOpen:i,reset:()=>{r(""),l(void 0)},children:[n.jsxs("div",{className:"ClosePositionModal__body",children:[n.jsx("h1",{children:"Close Strategy"}),n.jsxs("div",{className:"info-row",children:[n.jsx("div",{className:"info-row__title",children:"Strike"}),n.jsx("div",{className:"info-row__value",children:n.jsx(pt,{strikeData:e,priceNode:W(e.strike,0)})})]}),e.market!=="Hegic"&&n.jsx(Zn,{value:s,setValue:r,title:"Amount",iconData:{src:x},isFocused:!0,maxValue:H(C)})]}),n.jsxs("div",{className:"ClosePositionModal__footer",children:[n.jsxs("div",{className:"info-row",children:[n.jsx("div",{className:"info-row__title",children:"PnL"}),n.jsx("div",{className:E("info-row__value",{positive:O>0n,negative:O<0n}),children:Mt(()=>Jo(O),ee(O))})]}),n.jsx(ce,{isDisabled:!B(),onClick:v,children:_()})]})]})},nl=()=>{const{account:e}=K(),[t,i]=b.useState(!1),a=()=>{t||i(!0)};b.useEffect(()=>{i(!1)},[e]);const s=$o(a),r=s==null?void 0:s.sort((f,T)=>T.isTotal?-1:f.isTotal?1:On(f,T,"premium",-1)),[o,l]=b.useState(null),[p,d]=b.useState(!1),[u,y]=b.useState(!1),c=f=>{l(f),d(!0)},m=f=>{l(f),y(!0)},[g]=b.useContext(Be);return g.opening&&r&&[...g.opening,...r],n.jsxs("div",{className:"BuilderPositions",children:[n.jsx("h1",{className:"BuilderPositions__title",children:"My Positions"}),n.jsx(Xo,{positions:r,isLoadingComplete:t,openCollateralModal:c,openCloseModal:m}),n.jsx(Qo,{isOpen:p,setIsOpen:d,position:o}),n.jsx(tl,{isOpen:u,setIsOpen:y,position:o})]})},il=()=>{const e=xt("asset","ETH"),[t,i]=b.useState({});return b.useEffect(()=>{i(Gn())},[]),n.jsx(Be.Provider,{value:[t,i],children:n.jsxs("div",{className:"Builder",children:[n.jsx(_o,{assetState:e}),n.jsx(nl,{})]})})};const al=()=>{const e=Kn(),t=Yn(),{ETH:i,BTC:a}=Ne()??{};return console.log(i,a),b.useEffect(()=>{e&&console.log(e),t&&console.log(t)},[e,t]),$(1),$(1,8),hn($(1),2),ve($(-1)),ct($(1)),ct($(-1)),Et($(1,10),10,8),Ce($(1),8),ye($(1,8),8),H(1000000000000000000n),H(1000n,3),W($(1e3)),W($(1e3),0),W($(1e3),5),W($(1e3,8),2,8),n.jsxs("div",{className:"Sandbox",children:[n.jsx("h3",{className:"text-center",children:"Page for calculations testing"}),n.jsxs("p",{children:["Default Decimals: ",n.jsx("span",{style:{color:"white"},children:Q})]}),n.jsx("div",{style:{margin:"10px 0"},children:t==null?void 0:t.map(s=>{const r=s.premium,o=W(r);return n.jsxs("div",{children:[o," ",n.jsxs("span",{className:"muted",children:["(",s.asset,")"]})]},s.id)})})]})};const sl=()=>{G();const{account:e,isConnected:t}=K(),i=Ne();return b.useEffect(()=>{},[e]),b.useEffect(()=>{},[i]),b.useEffect(()=>{},[]),n.jsxs("div",{className:"RyskSandbox",children:[n.jsx("h1",{children:"Rysk.Finance SDK"}),n.jsx("div",{className:"text-center muted_light",children:"Uncomment needed functions and watch console"})]})},rl=()=>{const e=Ye(),t=Si();return b.useEffect(()=>{e.pathname.endsWith("terminal")&&t("/terminal/builder")},[e.pathname]),n.jsxs(vi,{children:[n.jsxs(ke,{path:"/terminal",element:n.jsx(rs,{}),children:[n.jsx(ke,{path:"builder",element:n.jsx(il,{})}),n.jsx(ke,{path:"margin-trading",element:n.jsx("div",{children:"Margin Trading"})})]}),n.jsx(ke,{path:"/sandbox",element:n.jsx(al,{})}),n.jsx(ke,{path:"/rysk-sandbox",element:n.jsx(sl,{})}),n.jsx(ke,{path:"*",element:n.jsx(wi,{to:is,replace:!0})})]})},ol=()=>n.jsxs("div",{className:"Tooltips",children:[n.jsx(oe,{id:"Tooltip_default"}),n.jsx(oe,{place:"bottom-end",id:"Tooltip_bottom-end"})]});const ll=({error:e})=>{const t=cn(e);return n.jsx(Fe,{className:"GlobalErrorModal",isOpen:!0,isObligatory:!0,children:n.jsxs("div",{className:"muted_light",children:[n.jsx("p",{children:"Error occurred:"}),n.jsx("p",{className:"negative",children:t}),n.jsx("br",{}),n.jsx("p",{children:"Please, reload the page."})]})})};const pl="/assets/Discord-f7d998b5.svg",ul="/assets/Gitbook-c728118d.svg",dl="/assets/Github-d50e83d6.svg",yl="/assets/Mirror-095740c8.svg",cl="/assets/Dune-cc12c29c.svg",ml="/assets/Twitter-5cfdd2f4.svg",Tl=()=>{const e=[{name:"Discord",icon:pl,url:"https://discord.gg/5DGZ7rzSfS"},{name:"Gitbook",icon:ul,url:"https://docs.sharwa.finance/"},{name:"Github",icon:dl,url:"https://github.com/SharwaFinance"},{name:"Mirror",icon:yl,url:"https://mirror.xyz/sharwa-finance.eth"},{name:"Dune",icon:cl,url:"https://dune.com/sharwa_finance/aggregator"},{name:"Twitter",icon:ml,url:"https://twitter.com/SharwaFinance"}];return n.jsx("footer",{className:"Footer",children:n.jsxs("div",{className:"Footer__content _container",children:[n.jsx(tn,{}),n.jsx("div",{className:"Footer__smedia-items",children:e.map(t=>n.jsx("a",{className:"Footer__smedia-item",target:"_blank",rel:"noreferrer",href:t.url,children:n.jsx("img",{src:t.icon,alt:`${t.name} logo`})},t.name))})]})})};const fl=({children:e})=>n.jsx("div",{className:"GlobalStickyMessage",children:e}),bl=()=>{const e=G(),{data:t,error:i}=je("useTokenPricesConfig",{fetcher:async()=>{const a={},s=[];return At.forEach(r=>{s.push($a(e,r).then(o=>{a[r]=o}))}),await Promise.all(s),a},refreshInterval:60*1e3,refreshWhenHidden:!0,revalidateOnFocus:!1});return i?(console.log(i),null):t},hl=({children:e})=>{const t=bl();return n.jsx(wn.Provider,{value:t,children:e})};function gl(){const{chain:e}=li(),t=()=>n.jsxs(n.Fragment,{children:[n.jsx(za,{}),n.jsx("main",{className:"_container",children:n.jsx(rl,{})}),n.jsx(Tl,{}),n.jsx(fl,{children:"Sharwa.Finance is in alpha. Use at your own risk"})]}),i=()=>n.jsx(Ja,{chainId:e.id});return e!=null&&e.unsupported?i():t()}function xl(){return n.jsx(Pi,{fallbackRender:ll,children:n.jsxs(n.Fragment,{children:[n.jsx(Za,{}),n.jsx(ol,{}),n.jsx(oi,{config:Ha(),children:n.jsx(ei,{children:n.jsx(ns,{children:n.jsx(hl,{children:n.jsx(gl,{})})})})})]})})}Qn.createRoot(document.getElementById("root")).render(n.jsx(Ee.StrictMode,{children:n.jsx(xl,{})}));
